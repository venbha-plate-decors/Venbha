import{e as _e,r as c,j as e,m as P,f as W,h as K}from"./vendor-fZdEb4jm.js";import{s as U,u as Re,H as Fe}from"./index-C37SJhMu.js";import{D as ie}from"./ui-DCtFd0bY.js";import{f as Te,a as Ue,b as ne,u as oe,c as qe,d as Ve,e as Oe,g as He,h as ze}from"./databaseUtils-B1byqJMK.js";import{f as Le,u as Be,d as Je,b as Xe,c as Ze}from"./contactUtils-DgZTSmwA.js";const We=async(w,b=1920,g=1080,N=.85)=>new Promise((k,m)=>{const o=new FileReader;o.readAsDataURL(w),o.onload=h=>{const d=new Image;d.src=h.target.result,d.onload=()=>{const S=document.createElement("canvas");let f=d.width,v=d.height;f>v?f>b&&(v=Math.round(v*b/f),f=b):v>g&&(f=Math.round(f*g/v),v=g),S.width=f,S.height=v,S.getContext("2d").drawImage(d,0,0,f,v),S.toBlob(M=>{if(M){const x=new File([M],w.name,{type:"image/jpeg",lastModified:Date.now()});k(x)}else m(new Error("Failed to compress image"))},"image/jpeg",N)},d.onerror=()=>{m(new Error("Failed to load image"))}},o.onerror=()=>{m(new Error("Failed to read file"))}}),Y=async(w,b="Gallery",g="images")=>{try{const N=await We(w),k=w.name.split(".").pop(),m=`${Date.now()}_${Math.random().toString(36).substring(7)}.${k}`,o=`${g}/${m}`,{data:h,error:d}=await U.storage.from(b).upload(o,N,{cacheControl:"3600",upsert:!1});if(d)return console.error("Upload error:",d),{success:!1,error:d};const{data:{publicUrl:S}}=U.storage.from(b).getPublicUrl(o);return{success:!0,url:S,path:o}}catch(N){return console.error("Upload error:",N),{success:!1,error:N}}},_=async(w,b="Gallery")=>{try{const{error:g}=await U.storage.from(b).remove([w]);return g?(console.error("Delete error:",g),{success:!1,error:g}):{success:!0}}catch(g){return console.error("Delete error:",g),{success:!1,error:g}}},Ke=async(w,b="Gallery",g="videos")=>{try{const N=w.name.split(".").pop(),k=`${Date.now()}_${Math.random().toString(36).substring(7)}.${N}`,m=`${g}/${k}`,{data:o,error:h}=await U.storage.from(b).upload(m,w,{cacheControl:"3600",upsert:!1});if(h)return console.error("Upload error:",h),{success:!1,error:h};const{data:{publicUrl:d}}=U.storage.from(b).getPublicUrl(m);return{success:!0,url:d,path:m}}catch(N){return console.error("Upload error:",N),{success:!1,error:N}}},ta=()=>{const w=_e(),{user:b,signOut:g,updatePassword:N}=Re(),[k,m]=c.useState(!1),[o,h]=c.useState(()=>localStorage.getItem("adminActiveTab")||"dashboard");c.useEffect(()=>{localStorage.setItem("adminActiveTab",o)},[o]);const[d,S]=c.useState([]),[f,v]=c.useState([]),[D,M]=c.useState([]),[x,Q]=c.useState("image"),[z,L]=c.useState(!1),[r,B]=c.useState({name:"Admin User",image:null}),[A,J]=c.useState({newPassword:"",confirmPassword:""}),[re,l]=c.useState(!1),[ce,n]=c.useState(""),[de,$]=c.useState(!1),[p,q]=c.useState(null),X=()=>l(!1),[u,V]=c.useState([]),[I,O]=c.useState({isOpen:!1,mode:"edit",entryId:null,notes:""}),[me,R]=c.useState(!1),ee=(a,s)=>{O({isOpen:!0,mode:s,entryId:a.id,notes:a.notes||""})},F=()=>{O({isOpen:!1,mode:"edit",entryId:null,notes:""})},he=a=>{O(s=>({...s,notes:a}))},ue=async()=>{(await Xe(I.entryId,I.notes)).success?(V(s=>s.map(t=>t.id===I.entryId?{...t,notes:I.notes}:t)),n("Notes saved successfully!"),l(!0),setTimeout(()=>l(!1),2e3),F()):(n("Failed to save notes"),l(!0))},pe=a=>{q({id:a,handler:"contact"}),$(!0)},ge=async(a,s)=>{(await Ze(a,s===""?null:s)).success?(V(i=>i.map(j=>j.id===a?{...j,workflow_status:s===""?null:s}:j)),n("Status updated successfully!"),l(!0),setTimeout(()=>l(!1),2e3)):(n("Failed to update status"),l(!0))},xe=()=>{const a=["Name","Email","Phone","Message","Date","Notes","Status"],s=u.map(i=>[i.name,i.email,i.phone,i.message,new Date(i.created_at).toLocaleString("en-IN"),i.notes||"",i.workflow_status||"Not Set"]),t=[a.join(","),...s.map(i=>i.map(j=>`"${String(j).replace(/"/g,'""')}"`).join(","))].join(`
`);Z(t,"contact-enquiries.csv","text/csv"),R(!1),n("Exported to CSV successfully!"),l(!0),setTimeout(()=>l(!1),2e3)},je=()=>{const a=u.map(i=>({Name:i.name,Email:i.email,Phone:i.phone,Message:i.message,Date:new Date(i.created_at).toLocaleString("en-IN"),Notes:i.notes||"",Status:i.workflow_status||"Not Set"})),s=Object.keys(a[0]||{}),t=[s.join(","),...a.map(i=>s.map(j=>`"${String(i[j]).replace(/"/g,'""')}"`).join(","))].join(`
`);Z(t,"contact-enquiries.xlsx","application/vnd.ms-excel"),R(!1),n("Exported to Excel successfully!"),l(!0),setTimeout(()=>l(!1),2e3)},fe=()=>{const a=u.map(t=>({name:t.name,email:t.email,phone:t.phone,message:t.message,date:new Date(t.created_at).toISOString(),notes:t.notes||"",status:t.workflow_status||"Not Set"})),s=JSON.stringify(a,null,2);Z(s,"contact-enquiries.json","application/json"),R(!1),n("Exported to JSON successfully!"),l(!0),setTimeout(()=>l(!1),2e3)},Z=(a,s,t)=>{const i=new Blob([a],{type:t}),j=URL.createObjectURL(i),C=document.createElement("a");C.href=j,C.download=s,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(j)},T=()=>{m(!k)};c.useEffect(()=>{Ne(),ae();const a=localStorage.getItem("adminProfile");a&&B(JSON.parse(a))},[]),c.useEffect(()=>{o==="contact-inquiries"&&u.length>0&&ve()},[o]);const Ne=async()=>{try{const a=await Te();a.success&&S(a.data);const s=await Ue();s.success&&v(s.data);const t=await ne();t.success&&M(t.data)}catch(a){console.error("Error loading gallery data:",a)}},ae=async()=>{try{const a=await Le();a.success&&V(a.data)}catch(a){console.error("Error loading contact entries:",a)}},ve=async()=>{try{const a=u.filter(s=>s.status==="new");for(const s of a)await Be(s.id,"read");await ae()}catch(a){console.error("Error marking messages as read:",a)}},ye=async a=>{a.preventDefault();const s=document.getElementById("media-upload"),t=Array.from(s.files);if(t.length!==0){n("Uploading and optimizing... Please wait."),l(!0);try{for(const E of t)if(x==="video"){if(E.size>52428800)throw new Error(`Video "${E.name}" is too large. Maximum size is 50MB. Current size: ${(E.size/1024/1024).toFixed(2)}MB`)}else if(x==="image"&&E.size>10485760)throw new Error(`Image "${E.name}" is too large. Maximum size is 10MB. Current size: ${(E.size/1024/1024).toFixed(2)}MB`);const C=t.map(async E=>{let y;if(x==="image"?y=await Y(E):y=await Ke(E),!y.success)throw new Error(y.error.message||"Upload failed");const G=await He({url:y.url,storage_path:y.path,type:x,alt:`Gallery ${x}`});if(!G.success)throw await _(y.path),new Error(G.error.message||"Database error");return G.data}),H=await Promise.all(C);x==="image"?S([...H,...d]):v([...H,...f]),window.dispatchEvent(new Event("galleryUpdated")),s.value="",n(`Successfully uploaded ${t.length} ${x}(s)!`),setTimeout(()=>l(!1),2e3)}catch(i){console.error("Upload error:",i),n(`Error: ${i.message||"Failed to upload media"}`)}}},se=(a,s,t)=>{q({id:a,type:s,storagePath:t,handler:"media"}),$(!0)},we=async()=>{if(p)try{if(p.handler==="media"){if(!(await Ve(p.id)).success)throw new Error("Failed to delete from database");p.storagePath&&await _(p.storagePath),p.type==="image"?S(d.filter(s=>s.id!==p.id)):v(f.filter(s=>s.id!==p.id)),window.dispatchEvent(new Event("galleryUpdated")),n("Item deleted successfully!"),l(!0),setTimeout(()=>l(!1),2e3)}else if(p.handler==="home"){if(!(await Oe(p.id)).success)throw new Error("Failed to delete from database");p.storagePath&&await _(p.storagePath),M(D.filter(s=>s.id!==p.id)),window.dispatchEvent(new Event("galleryUpdated")),n("Image deleted successfully!"),l(!0),setTimeout(()=>l(!1),2e3)}else if(p.handler==="contact")if((await Je(p.id)).success)V(s=>s.filter(t=>t.id!==p.id)),n("Contact entry deleted successfully!"),l(!0),setTimeout(()=>l(!1),2e3);else throw new Error("Failed to delete contact entry")}catch(a){console.error("Delete error:",a),n("Error deleting item. Please try again."),l(!0)}finally{$(!1),q(null)}},be=async a=>{a.preventDefault();const s=await ne(),t=s.success?s.data.length:D.length;if(t>=6){n("Maximum images is 6 only. Please delete any existing image to upload new ones."),l(!0);return}const i=document.getElementById("home-image-upload"),j=Array.from(i.files);if(j.length!==0){if(t+j.length>6){n(`You can only upload ${6-t} more image(s). Maximum is 6 images total.`),l(!0);return}n("Uploading and optimizing... Please wait."),l(!0);try{const C=j.map(async E=>{const y=await Y(E,"Gallery","home_images");if(!y.success)throw new Error(y.error.message||"Upload failed");const G=await ze({url:y.url,storage_path:y.path,alt:"Home Gallery Image"});if(!G.success)throw await _(y.path),new Error(G.error.message||"Database error");return G.data}),H=await Promise.all(C);M([...H,...D]),window.dispatchEvent(new Event("galleryUpdated")),i.value="",n(`Successfully uploaded ${j.length} image(s)!`),setTimeout(()=>l(!1),2e3)}catch(C){console.error("Upload error:",C),n(`Error: ${C.message||"Failed to upload images"}`)}}},Ce=(a,s)=>{q({id:a,storagePath:s,handler:"home"}),$(!0)},te=(a,s)=>{const t=document.createElement("a");t.href=a,t.download=s||"image.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)},Pe=async a=>{const s=a.target.files[0];if(s)try{r.storagePath&&await _(r.storagePath,"Gallery"),n("Uploading profile image..."),l(!0);const t=await Y(s,"Gallery","profile_pics");if(t.success){const i={...r,image:t.url,storagePath:t.path};B(i),localStorage.setItem("adminProfile",JSON.stringify(i)),n("Profile updated successfully!"),setTimeout(()=>l(!1),2e3)}else n("Failed to upload image"),setTimeout(()=>l(!1),2e3)}catch(t){console.error("Profile upload error:",t),n("Error updating profile"),setTimeout(()=>l(!1),2e3)}},Se=async()=>{if(window.confirm("Are you sure you want to remove the profile photo?"))try{r.storagePath&&await _(r.storagePath,"Gallery");const a={...r,image:null,storagePath:null};B(a),localStorage.setItem("adminProfile",JSON.stringify(a)),n("Profile photo removed"),l(!0),setTimeout(()=>l(!1),2e3)}catch(a){console.error("Error removing profile photo:",a),n("Failed to remove photo"),l(!0)}},Ee=async a=>{if(a.preventDefault(),A.newPassword!==A.confirmPassword){n("Passwords do not match!"),l(!0);return}if(A.newPassword.length<6){n("Password must be at least 6 characters long."),l(!0);return}try{const{error:s}=await N(A.newPassword);s?n(`Error updating password: ${s.message}`):(n("Password updated successfully!"),J({newPassword:"",confirmPassword:""}))}catch{n("An error occurred while updating password.")}l(!0)},ke=async()=>{if(window.confirm("Are you sure you want to logout?")){const{error:a}=await g();a?(n("Error logging out. Please try again."),l(!0)):w("/admin_login")}},Ie={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},le={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},De=()=>e.jsxs(e.Fragment,{children:[e.jsxs(P.div,{className:"dashboard-header",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:T,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Dashboard Overview"}),e.jsx("p",{children:"Welcome back, Admin! Here's what's happening today."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[r.image?e.jsx("img",{src:r.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:r.name})]})]})]}),e.jsx(P.div,{className:"stats-grid",variants:Ie,initial:"hidden",animate:"show",children:e.jsxs(P.div,{className:"stat-card",variants:le,children:[e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Contact Enquiries"}),e.jsx("p",{className:"stat-value",children:u.length}),e.jsx("span",{className:"stat-change",children:"Messages"}),e.jsx("button",{className:"btn-primary",style:{padding:"0.4rem 1rem",fontSize:"0.8rem",marginTop:"10px",height:"auto"},onClick:()=>h("contact-inquiries"),children:"View"})]}),e.jsx("div",{className:"stat-icon users",children:"âœ‰ï¸"})]})})]}),Ae=()=>e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:T,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Contact Enquiries"}),e.jsx("p",{children:"View and manage messages from the contact form."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[r.image?e.jsx("img",{src:r.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:r.name})]})]})]}),e.jsx(P.div,{className:"recent-orders",variants:le,initial:"hidden",animate:"show",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[u.map(a=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Name",children:a.name}),e.jsx("td",{"data-label":"Email",children:a.email}),e.jsx("td",{"data-label":"Phone",children:a.phone}),e.jsx("td",{"data-label":"Message",style:{maxWidth:"300px",whiteSpace:"normal"},children:a.message}),e.jsx("td",{"data-label":"Date",children:new Date(a.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-label":"Notes",children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:a.notes?e.jsx("button",{className:"action-btn view-notes-btn",onClick:()=>ee(a,"view"),title:"View Notes",children:"ðŸ‘ï¸"}):e.jsx("button",{className:"action-btn edit-notes-btn",onClick:()=>ee(a,"edit"),title:"Add Notes",children:"âœï¸"})})}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("a",{href:`tel:${a.phone}`,className:"action-btn call-btn",title:"Call",children:"ðŸ“ž"}),e.jsx("a",{href:`mailto:${a.email}`,className:"action-btn email-btn",title:"Send Email",children:"âœ‰ï¸"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>pe(a.id),title:"Delete",children:"ðŸ—‘"})]})}),e.jsx("td",{"data-label":"Status",children:e.jsxs("select",{className:"status-dropdown",value:a.workflow_status||"",onChange:s=>ge(a.id,s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"need_to_call",children:"Need to call"}),e.jsx("option",{value:"need_to_share_pictures",children:"Need to Share the pictures"}),e.jsx("option",{value:"waiting_for_confirmation",children:"Waiting for confirmation"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},a.id)),u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{textAlign:"center"},children:"No enquiries found."})})]})]})})}),me&&e.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:e.jsxs(P.div,{className:"modal-content export-modal",onClick:a=>a.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Export Contact Enquiries"}),e.jsx("button",{className:"modal-close",onClick:()=>R(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1.5rem",color:"#666"},children:"Choose your preferred export format:"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option-btn excel-btn",onClick:je,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"export-label",children:"Excel (.xlsx)"}),e.jsx("span",{className:"export-desc",children:"Best for spreadsheet analysis"})]}),e.jsxs("button",{className:"export-option-btn csv-btn",onClick:xe,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“„"}),e.jsx("span",{className:"export-label",children:"CSV (.csv)"}),e.jsx("span",{className:"export-desc",children:"Universal format"})]}),e.jsxs("button",{className:"export-option-btn json-btn",onClick:fe,children:[e.jsx("span",{className:"export-icon",children:"ðŸ”§"}),e.jsx("span",{className:"export-label",children:"JSON (.json)"}),e.jsx("span",{className:"export-desc",children:"For developers"})]})]})]})]})})]});c.useRef(null),c.useRef(null);const Me=()=>e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:T,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Gallery Management"}),e.jsx("p",{children:"Manage photos and videos for your gallery."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[r.image?e.jsx("img",{src:r.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:r.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Media"}),e.jsxs("div",{className:"upload-type-selector",children:[e.jsx("button",{className:`type-btn ${x==="image"?"active":""}`,onClick:()=>Q("image"),children:"ðŸ“¸ Photo"}),e.jsx("button",{className:`type-btn ${x==="video"?"active":""}`,onClick:()=>Q("video"),children:"ðŸŽ¥ Video"})]}),e.jsxs("form",{onSubmit:ye,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Upload ",x==="image"?"Photos":"Videos"," from Device (Multiple allowed)"]}),e.jsx("input",{id:"media-upload",type:"file",accept:x==="image"?"image/*":"video/*",multiple:!0,required:!0})]}),e.jsxs("button",{type:"submit",className:"btn-primary",children:["Add ",x==="image"?"Photos":"Videos"]})]})]}),x==="image"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Photos (",d.length,")"]})}),e.jsxs(W,{axis:"y",values:d,onReorder:a=>{S(a),oe(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[d.map(a=>e.jsxs(K,{value:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>te(a.url||a.src,`gallery-${a.id}.png`),children:e.jsx(ie,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>se(a.id,"image",a.storage_path),children:"Delete"})]})]},a.id)),d.length===0&&e.jsx("p",{className:"no-images",children:"No photos in gallery."})]})]}),x==="video"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"media-section-header video-header",children:e.jsxs("h3",{children:["Videos (",f.length,")"]})}),e.jsxs(W,{axis:"y",values:f,onReorder:a=>{v(a),oe(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[f.map(a=>e.jsxs(K,{value:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("video",{src:a.url||a.src,controls:!0,className:"admin-video-preview"}),e.jsx("div",{className:"item-actions",children:e.jsx("button",{className:"btn-delete",onClick:()=>se(a.id,"video",a.storage_path),children:"Delete"})})]},a.id)),f.length===0&&e.jsx("p",{className:"no-images",children:"No videos in gallery."})]})]})]}),Ge=()=>e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"settings-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:T,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{children:"Manage your profile and security preferences."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[r.image?e.jsx("img",{src:r.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:r.name})]})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Profile Settings"}),e.jsxs("div",{className:"profile-upload-section",children:[e.jsx("div",{className:"current-avatar",children:r.image?e.jsx("img",{src:r.image,alt:"Profile"}):e.jsx("div",{className:"avatar-placeholder",children:"AD"})}),e.jsxs("div",{className:"upload-controls",children:[e.jsxs("label",{className:"btn-secondary",children:["Change Profile Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:Pe,hidden:!0})]}),r.image&&e.jsx("button",{className:"btn-remove-photo",onClick:Se,children:"Remove Photo"}),e.jsx("p",{className:"help-text",children:"Recommended: Square JPG, PNG"})]})]})]}),e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Security"}),e.jsxs("form",{onSubmit:Ee,className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Password"}),e.jsx("input",{type:"password",placeholder:"Enter new password",value:A.newPassword,onChange:a=>J({...A,newPassword:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:A.confirmPassword,onChange:a=>J({...A,confirmPassword:a.target.value}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Change Password"})]})]})]})]}),$e=()=>e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:T,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Homepage Gallery Management"}),e.jsx("p",{children:"Manage images displayed on the home page gallery section."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[r.image?e.jsx("img",{src:r.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:r.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Images"}),e.jsxs("form",{onSubmit:be,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos from Device (Multiple allowed)"}),e.jsx("input",{id:"home-image-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Homepage Photos (",D.length,")"]})}),e.jsxs(W,{axis:"y",values:D,onReorder:a=>{M(a),qe(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[D.map(a=>e.jsxs(K,{value:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>te(a.url||a.src,`home-gallery-${a.id}.png`),children:e.jsx(ie,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>Ce(a.id,a.storage_path),children:"Delete"})]})]},a.id)),D.length===0&&e.jsx("p",{className:"no-images",children:"No photos in homepage gallery."})]})]});return e.jsxs("div",{className:`admin-dashboard ${k?"sidebar-open":""}`,children:[e.jsx(Fe,{children:e.jsx("title",{children:"Admin Dashboard | Venbha Plate Decors"})}),k&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>m(!1)}),e.jsxs("aside",{className:`dashboard-sidebar ${k?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header-mobile",children:[e.jsx("div",{className:"sidebar-brand",children:"VENBHA ADMIN"}),e.jsx("button",{className:"close-sidebar-btn",onClick:()=>m(!1),children:"Ã—"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("a",{className:`nav-item ${o==="dashboard"?"active":""}`,onClick:()=>{h("dashboard"),m(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“Š"})," Dashboard"]}),e.jsxs("div",{className:"nav-item-container",onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),children:[e.jsxs("a",{className:`nav-item ${o==="gallery"||o==="home-gallery"?"active":""}`,onClick:()=>L(!z),children:[e.jsx("span",{className:"nav-icon",children:"ðŸ–¼ï¸"})," Gallery",e.jsx("span",{className:"dropdown-arrow",style:{marginLeft:"auto",fontSize:"0.8em"},children:z?"â–¼":"â–¶"})]}),z&&e.jsxs("div",{className:"sub-menu",children:[e.jsx("a",{className:`sub-nav-item ${o==="gallery"?"active":""}`,onClick:()=>{h("gallery"),m(!1)},children:"Gallery Page"}),e.jsx("a",{className:`sub-nav-item ${o==="home-gallery"?"active":""}`,onClick:()=>{h("home-gallery"),m(!1)},children:"Homepage Gallery"})]})]}),e.jsxs("a",{className:`nav-item ${o==="collections"?"active":""}`,onClick:()=>{h("collections"),m(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“‚"})," Collections"]}),e.jsxs("a",{className:`nav-item ${o==="settings"?"active":""}`,onClick:()=>{h("settings"),m(!1)},children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"})," Settings"]}),e.jsxs("a",{className:"nav-item logout-btn",onClick:ke,style:{marginTop:"auto",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"1rem"},children:[e.jsx("span",{className:"nav-icon",children:"ðŸšª"})," Logout"]})]})]}),e.jsxs("main",{className:"dashboard-main",children:[o==="dashboard"&&De(),o==="contact-inquiries"&&Ae(),o==="gallery"&&Me(),o==="home-gallery"&&$e(),o==="collections"&&e.jsx("div",{className:"placeholder-tab",children:"Collections Management Coming Soon"}),o==="settings"&&Ge()]}),re&&e.jsx("div",{className:"popup-overlay",onClick:X,children:e.jsxs(P.div,{className:"popup-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Notification"}),e.jsx("button",{className:"close-popup-btn",onClick:X,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsx("p",{children:ce})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{className:"popup-btn-primary",onClick:X,children:"OK"})})]})}),de&&e.jsx("div",{className:"popup-overlay",onClick:()=>$(!1),children:e.jsxs(P.div,{className:"popup-content delete-confirm",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"popup-header",children:e.jsx("h3",{children:"âš ï¸ Confirm Delete"})}),e.jsx("div",{className:"popup-body",children:p?.handler==="contact"?e.jsx("p",{children:"Are you sure you want to delete this Message?"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure you want to delete this item?"}),e.jsx("p",{className:"warning-text",children:"This action cannot be undone."})]})}),e.jsxs("div",{className:"popup-footer",children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>$(!1),children:"Cancel"}),e.jsx("button",{className:"popup-btn-danger",onClick:we,children:"Delete"})]})]})}),I.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:F,children:e.jsxs(P.div,{className:"popup-content notes-modal",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:I.mode==="edit"?"âœï¸ Edit Notes":"ðŸ‘ï¸ View Notes"}),e.jsx("button",{className:"close-popup-btn",onClick:F,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:I.mode==="edit"?e.jsx("textarea",{className:"notes-modal-textarea",placeholder:"Add your notes here...",value:I.notes,onChange:a=>he(a.target.value),rows:"6",autoFocus:!0}):e.jsx("div",{className:"notes-view-content",children:I.notes||"No notes available"})}),e.jsx("div",{className:"popup-footer",children:I.mode==="edit"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:F,children:"Cancel"}),e.jsx("button",{className:"popup-btn-primary",onClick:ue,children:"Save Notes"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>O(a=>({...a,mode:"edit"})),children:"Edit"}),e.jsx("button",{className:"popup-btn-primary",onClick:F,children:"Close"})]})})]})})]})};export{ta as default};
