import{f as va,r as c,e as wa,j as e,m as j,h as ke,i as ya,k as Ca}from"./vendor-C4MZbRyZ.js";import{s as fe,u as Pa,H as Sa,l as Ea}from"./index-B7vaWEmF.js";import{D as De}from"./ui-h3E-pYNY.js";import{b as ka,c as Ie,a as Da,f as Ia,u as _e,d as Ae,e as _a,g as Aa,h as Ma,i as Ra,j as qa,k as Ta,l as Ua,m as Ga,n as Fa,o as Oa}from"./databaseUtils-_DJc_1NP.js";import{f as $a,u as La,d as Va,b as Ha,c as za}from"./contactUtils-eflRudfg.js";import{f as Ba,d as Ja,u as Wa,b as Xa}from"./collectionUtils-BxN3Gg9L.js";const Za=async(v,D=1920,N=1080,A=.85)=>new Promise((I,g)=>{const f=new FileReader;f.readAsDataURL(v),f.onload=M=>{const r=new Image;r.src=M.target.result,r.onload=()=>{const h=document.createElement("canvas");let x=r.width,w=r.height;x>w?x>D&&(w=Math.round(w*D/x),x=D):w>N&&(x=Math.round(x*N/w),w=N),h.width=x,h.height=w,h.getContext("2d").drawImage(r,0,0,x,w),h.toBlob(U=>{if(U){const je=new File([U],v.name.replace(/\.[^/.]+$/,"")+".webp",{type:"image/webp",lastModified:Date.now()});I(je)}else g(new Error("Failed to compress image"))},"image/webp",A)},r.onerror=()=>{g(new Error("Failed to load image"))}},f.onerror=()=>{g(new Error("Failed to read file"))}}),z=async(v,D="Gallery",N="images")=>{try{const A=await Za(v),g=`${Date.now()}_${Math.random().toString(36).substring(7)}.webp`,f=`${N}/${g}`,{data:M,error:r}=await fe.storage.from(D).upload(f,A,{cacheControl:"3600",upsert:!1,contentType:"image/webp"});if(r)return console.error("Upload error:",r),{success:!1,error:r};const{data:{publicUrl:h}}=fe.storage.from(D).getPublicUrl(f);return{success:!0,url:h,path:f}}catch(A){return console.error("Upload error:",A),{success:!1,error:A}}},k=async(v,D="Gallery")=>{try{const{error:N}=await fe.storage.from(D).remove([v]);return N?(console.error("Delete error:",N),{success:!1,error:N}):{success:!0}}catch(N){return console.error("Delete error:",N),{success:!1,error:N}}},Me=({item:v,children:D,className:N,...A})=>{const I=ya(),g=c.useRef(null),f=r=>{g.current=setTimeout(()=>{navigator.vibrate&&navigator.vibrate(50),I.start(r)},2e3)},M=()=>{g.current&&(clearTimeout(g.current),g.current=null)};return e.jsx(Ca,{value:v,dragListener:!1,dragControls:I,className:N,...A,onMouseDown:r=>I.start(r),onTouchStart:f,onTouchEnd:M,onTouchMove:M,children:D})},ls=()=>{const v=va(),{user:D,signOut:N,updatePassword:A}=Pa(),[I,g]=c.useState(!1),{tab:f,subParam:M}=wa();let r=f||"dashboard";f==="collections"&&M&&(r="collection-designs");const h=a=>{v(`/admin_dashboard/${a}`)};c.useEffect(()=>{if(f)localStorage.setItem("adminActiveTab",f);else{const a=localStorage.getItem("adminActiveTab");a&&a!=="dashboard"&&v(`/admin_dashboard/${a}`,{replace:!0})}},[f,v]);const[x,w]=c.useState([]),[P,U]=c.useState([]),[je,Ka]=c.useState([]),[R,B]=c.useState([]),[L,te]=c.useState({name:"",image:null}),[Re,X]=c.useState(!1),[y,qe]=c.useState(()=>{try{const a=localStorage.getItem("adminSelectedCollection");return a?JSON.parse(a):null}catch{return null}});c.useEffect(()=>{y?localStorage.setItem("adminSelectedCollection",JSON.stringify(y)):localStorage.removeItem("adminSelectedCollection")},[y]);const[le,ne]=c.useState([]),[_,Z]=c.useState({name:"",image:null,plate_count:""}),[ie,K]=c.useState(!1),[C,J]=c.useState({isOpen:!1,id:null,name:"",plate_count:"",image:null,currentImage:"",storagePath:""}),oe=c.useRef(null),[S,Y]=c.useState({isOpen:!1,id:null,name:"",image:null,currentImage:"",storagePath:""}),[re,ce]=c.useState(!1),[d,de]=c.useState({name:"Admin User",image:null}),[G,me]=c.useState({newPassword:"",confirmPassword:""}),[Te,n]=c.useState(!1),[Ue,i]=c.useState(""),[Ge,q]=c.useState(!1),[m,V]=c.useState(null),he=()=>n(!1),[p,Q]=c.useState([]),[Ne,ee]=c.useState([]),[b,ae]=c.useState({isOpen:!1,mode:"edit",entryId:null,notes:"",type:"contact"}),[be,H]=c.useState(!1),se=(a,s,t="contact")=>{ae({isOpen:!0,mode:s,entryId:a.id,notes:a.notes||"",type:t})},Fe=a=>{Y({isOpen:!0,id:a.id,name:a.name,image:null,currentImage:a.image,storagePath:a.storage_path})},ue=()=>{Y({isOpen:!1,id:null,name:"",image:null,currentImage:"",storagePath:""})},Oe=async a=>{a.preventDefault(),X(!0),i("Updating collection..."),n(!0);try{let s={name:S.name},t=S.storagePath;if(S.image){S.storagePath&&await k(S.storagePath);const o=await z(S.image,"Gallery","collections");if(!o.success)throw new Error("Image upload failed");s.image=o.url,s.storage_path=o.path}const l=await Ga(S.id,s);if(l.success)B(R.map(o=>o.id===S.id?l.data:o)),i("Collection updated successfully!"),setTimeout(()=>n(!1),2e3),ue();else throw new Error(l.error.message||"Update failed")}catch(s){console.error(s),i("Failed to update collection."),setTimeout(()=>n(!1),2e3)}finally{X(!1)}},W=()=>{ae({isOpen:!1,mode:"edit",entryId:null,notes:""})},$e=a=>{ae(s=>({...s,notes:a}))},Le=async()=>{let a;b.type==="collection"?(a=await Wa(b.entryId,b.notes),a.success&&ee(s=>s.map(t=>t.id===b.entryId?{...t,notes:b.notes}:t))):(a=await Ha(b.entryId,b.notes),a.success&&Q(s=>s.map(t=>t.id===b.entryId?{...t,notes:b.notes}:t))),a.success?(i("Notes saved successfully!"),n(!0),setTimeout(()=>n(!1),2e3),W()):(i("Failed to save notes"),n(!0))},Ve=a=>{V({id:a,handler:"contact"}),q(!0)},He=a=>{V({id:a,handler:"collection_enquiry"}),q(!0)},ze=async(a,s)=>{(await za(a,s===""?null:s)).success?(Q(l=>l.map(o=>o.id===a?{...o,workflow_status:s}:o)),i("Status updated successfully!"),n(!0),setTimeout(()=>n(!1),2e3)):(i("Failed to update status"),n(!0))},Be=async(a,s)=>{(await Xa(a,s===""?null:s)).success?(ee(l=>l.map(o=>o.id===a?{...o,workflow_status:s}:o)),i("Status updated successfully!"),n(!0),setTimeout(()=>n(!1),2e3)):(i("Failed to update status"),n(!0))},ve=()=>{const a=["Name","Email","Phone","Message","Date","Notes","Status"],s=p.map(l=>[l.name,l.email,l.phone,l.message,new Date(l.created_at).toLocaleString("en-IN"),l.notes||"",l.workflow_status||"Not Set"]),t=[a.join(","),...s.map(l=>l.map(o=>`"${String(o).replace(/"/g,'""')}"`).join(","))].join(`
`);pe(t,"contact-enquiries.csv","text/csv"),H(!1),i("Exported to CSV successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},we=()=>{const a=p.map(l=>({Name:l.name,Email:l.email,Phone:l.phone,Message:l.message,Date:new Date(l.created_at).toLocaleString("en-IN"),Notes:l.notes||"",Status:l.workflow_status||"Not Set"})),s=Object.keys(a[0]||{}),t=[s.join(","),...a.map(l=>s.map(o=>`"${String(l[o]).replace(/"/g,'""')}"`).join(","))].join(`
`);pe(t,"contact-enquiries.xlsx","application/vnd.ms-excel"),H(!1),i("Exported to Excel successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},ye=()=>{const a=p.map(t=>({name:t.name,email:t.email,phone:t.phone,message:t.message,date:new Date(t.created_at).toISOString(),notes:t.notes||"",status:t.workflow_status||"Not Set"})),s=JSON.stringify(a,null,2);pe(s,"contact-enquiries.json","application/json"),H(!1),i("Exported to JSON successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},pe=(a,s,t)=>{const l=new Blob([a],{type:t}),o=URL.createObjectURL(l),u=document.createElement("a");u.href=o,u.download=s,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o)},F=()=>{g(!I)};c.useEffect(()=>{Je(),Ce(),We();const a=localStorage.getItem("adminProfile");a&&de(JSON.parse(a))},[]),c.useEffect(()=>{r==="contact-inquiries"&&p.length>0&&Xe()},[r]);const Je=async()=>{try{const a=await ka();a.success&&w(a.data);const s=await Ie();s.success&&U(s.data);const t=await Da();t.success&&B(t.data)}catch(a){console.error("Error loading gallery data:",a)}},Ce=async()=>{try{const a=await $a();a.success&&Q(a.data)}catch(a){console.error("Error loading contact entries:",a)}},We=async()=>{try{const a=await Ba();a.success&&ee(a.data)}catch(a){console.error("Error loading collection entries:",a)}},Xe=async()=>{try{const a=p.filter(s=>s.status==="new");for(const s of a)await La(s.id,"read");await Ce()}catch(a){console.error("Error marking messages as read:",a)}},Ze=a=>{a.target.files[0]&&te({...L,image:a.target.files[0]})},Ke=async a=>{if(a.preventDefault(),!L.name||!L.image){i("Please fill all fields"),n(!0);return}X(!0),i("Adding collection..."),n(!0);try{const s=await z(L.image,"Gallery","collections");if(!s.success)throw new Error("Image upload failed");const t=await Ua({name:L.name,image:s.url,storage_path:s.path});if(t.success)B([t.data,...R]),te({name:"",image:null}),oe.current&&(oe.current.value=""),i("Collection added successfully!"),setTimeout(()=>n(!1),2e3);else throw await k(s.path),new Error(t.error.message||"Database error")}catch(s){console.error(s),i("Failed to add collection.")}finally{X(!1)}},Ye=(a,s)=>{V({id:a,storagePath:s,handler:"collection"}),q(!0)},Qe=a=>{v(`/admin_dashboard/collections/${encodeURIComponent(a.name)}`)},Pe=async a=>{try{const s=await Ia(a);s.success&&ne(s.data)}catch(s){console.error("Error loading designs:",s)}};c.useEffect(()=>{r==="collection-designs"&&y&&Pe(y.id)},[y,r]);const ea=async a=>{if(a.preventDefault(),!_.name||!_.image||!_.plate_count||!y){i("Please fill all fields."),n(!0);return}K(!0),i("Adding design plate..."),n(!0);try{const s=await z(_.image,"Gallery","designs");if(!s.success)throw new Error("Image upload failed");const t=await Fa({collection_id:y.id,name:_.name,image:s.url,storage_path:s.path,plate_count:_.plate_count});if(!t.success)throw await k(s.path),new Error(t.error.message||"Database error");await Pe(y.id),Z({name:"",image:null,plate_count:""});const l=document.getElementById("design-image-input");l&&(l.value=""),i("Design plate added successfully!"),setTimeout(()=>n(!1),2e3)}catch(s){console.error(s),i(s.message||"Failed to add design.")}finally{K(!1)}},aa=(a,s)=>{V({id:a,storagePath:s,handler:"design"}),q(!0)},sa=a=>{J({isOpen:!0,id:a.id,name:a.name,plate_count:a.plate_count,image:null,currentImage:a.image,storagePath:a.storage_path})},ge=()=>{J({isOpen:!1,id:null,name:"",plate_count:"",image:null,currentImage:"",storagePath:""})},ta=async a=>{a.preventDefault(),K(!0),i("Updating design..."),n(!0);try{let s={name:C.name,plate_count:C.plate_count};if(C.image){C.storagePath&&await k(C.storagePath);const l=await z(C.image,"Gallery","designs");if(!l.success)throw new Error("Image upload failed");s.image=l.url,s.storage_path=l.path}const t=await Oa(C.id,s);if(t.success)ne(le.map(l=>l.id===C.id?t.data:l)),i("Design updated successfully!"),setTimeout(()=>n(!1),2e3),ge();else throw new Error(t.error.message||"Update failed")}catch(s){console.error(s),i(s.message||"Failed to update design."),setTimeout(()=>n(!1),2e3)}finally{K(!1)}},la=async a=>{a.preventDefault();const s=document.getElementById("media-upload"),t=Array.from(s.files);if(t.length!==0){i("Uploading and optimizing... Please wait."),n(!0);try{for(const E of t)if(E.size>10485760)throw new Error(`Image "${E.name}" is too large. Maximum size is 10MB. Current size: ${(E.size/1024/1024).toFixed(2)}MB`);const o=t.map(async E=>{let $;if($=await z(E),!$.success)throw new Error($.error.message||"Upload failed");const T=await qa({url:$.url,storage_path:$.path,type:"image",alt:"Gallery Image"});if(!T.success)throw await k($.path),new Error(T.error.message||"Database error");return T.data}),u=await Promise.all(o);w([...u,...x]),window.dispatchEvent(new Event("galleryUpdated")),i(`Successfully uploaded ${t.length} photo(s)!`),setTimeout(()=>n(!1),2e3),s.value=""}catch(l){console.error("Upload error:",l),i(`Error: ${l.message||"Failed to upload media"}`)}}},na=(a,s,t)=>{V({id:a,type:s,storagePath:t,handler:"media"}),q(!0)},ia=async()=>{if(m)try{if(m.handler==="media"){if(!(await _a(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await k(m.storagePath),w(x.filter(s=>s.id!==m.id)),window.dispatchEvent(new Event("galleryUpdated")),i("Item deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="home"){if(!(await Aa(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await k(m.storagePath),U(P.filter(s=>s.id!==m.id)),window.dispatchEvent(new Event("galleryUpdated")),i("Image deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="collection"){if(!(await Ma(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await k(m.storagePath),B(R.filter(s=>s.id!==m.id)),i("Collection deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="contact")if((await Va(m.id)).success)Q(s=>s.filter(t=>t.id!==m.id)),i("Contact entry deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3);else throw new Error("Failed to delete contact entry");else if(m.handler==="collection_enquiry")if((await Ja(m.id)).success)ee(s=>s.filter(t=>t.id!==m.id)),i("Collection entry deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3);else throw new Error("Failed to delete collection entry");else if(m.handler==="design"){if(!(await Ra(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await k(m.storagePath),ne(le.filter(s=>s.id!==m.id)),i("Design deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}}catch(a){console.error("Delete error:",a),i("Error deleting item. Please try again."),n(!0)}finally{q(!1),V(null)}},oa=async a=>{a.preventDefault();const s=await Ie(),t=s.success?s.data.length:P.length;if(t>=6){i("Maximum images is 6 only. Please delete any existing image to upload new ones."),n(!0);return}const l=document.getElementById("home-image-upload"),o=Array.from(l.files);if(o.length!==0){if(t+o.length>6){i(`You can only upload ${6-t} more image(s). Maximum is 6 images total.`),n(!0);return}i("Uploading and optimizing... Please wait."),n(!0);try{const u=o.map(async $=>{const T=await z($,"Gallery","home_images");if(!T.success)throw new Error(T.error.message||"Upload failed");const xe=await Ta({url:T.url,storage_path:T.path,alt:"Home Gallery Image"});if(!xe.success)throw await k(T.path),new Error(xe.error.message||"Database error");return xe.data}),E=await Promise.all(u);U([...E,...P]),window.dispatchEvent(new Event("galleryUpdated")),l.value="",i(`Successfully uploaded ${o.length} image(s)!`),setTimeout(()=>n(!1),2e3)}catch(u){console.error("Upload error:",u),i(`Error: ${u.message||"Failed to upload images"}`)}}},O=(a,s,t)=>{let l=[],o=null,u=null;t==="image"?(l=[...x],o=w,u=_e):t==="home"&&(l=[...P],o=U,u=Ae);const E=a+s;E<0||E>=l.length||([l[a],l[E]]=[l[E],l[a]],o(l),u(l))},ra=(a,s)=>{V({id:a,storagePath:s,handler:"home"}),q(!0)},Se=async(a,s)=>{try{i("Downloading..."),n(!0);const t=await fetch(a);if(!t.ok)throw new Error("Network response was not ok");const l=await t.blob(),o=window.URL.createObjectURL(l),u=document.createElement("a");u.href=o,u.download=s||"download",document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(o),setTimeout(()=>n(!1),1e3)}catch(t){console.error("Download failed:",t),i("Download failed. Opening in new tab..."),setTimeout(()=>n(!1),2e3),window.open(a,"_blank")}},ca=async a=>{const s=a.target.files[0];if(s)try{d.storagePath&&await k(d.storagePath,"Gallery"),i("Uploading profile image..."),n(!0);const t=await z(s,"Gallery","profile_pics");if(t.success){const l={...d,image:t.url,storagePath:t.path};de(l),localStorage.setItem("adminProfile",JSON.stringify(l)),i("Profile updated successfully!"),setTimeout(()=>n(!1),2e3)}else i("Failed to upload image"),setTimeout(()=>n(!1),2e3)}catch(t){console.error("Profile upload error:",t),i("Error updating profile"),setTimeout(()=>n(!1),2e3)}},da=async()=>{if(window.confirm("Are you sure you want to remove the profile photo?"))try{d.storagePath&&await k(d.storagePath,"Gallery");const a={...d,image:null,storagePath:null};de(a),localStorage.setItem("adminProfile",JSON.stringify(a)),i("Profile photo removed"),n(!0),setTimeout(()=>n(!1),2e3)}catch(a){console.error("Error removing profile photo:",a),i("Failed to remove photo"),n(!0)}},ma=async a=>{if(a.preventDefault(),G.newPassword!==G.confirmPassword){i("Passwords do not match!"),n(!0);return}if(G.newPassword.length<6){i("Password must be at least 6 characters long."),n(!0);return}try{const{error:s}=await A(G.newPassword);s?i(`Error updating password: ${s.message}`):(i("Password updated successfully!"),me({newPassword:"",confirmPassword:""}))}catch{i("An error occurred while updating password.")}n(!0)},ha=async()=>{if(window.confirm("Are you sure you want to logout?")){const{error:a}=await N();a?(i("Error logging out. Please try again."),n(!0)):v("/admin_login")}},Ee={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},ua=()=>{const a=p.filter(s=>!s.message||!s.message.startsWith("[Collection Enquiry]"));return e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Contact Enquiries"}),e.jsx("p",{children:"View and manage messages from the contact form."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),p.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:p.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsx(j.div,{className:"recent-orders",variants:Ee,initial:"hidden",animate:"show",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"contact-enquiries-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[a.map(s=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Name",children:s.name}),e.jsx("td",{"data-label":"Contact",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontWeight:"500"},children:s.phone}),e.jsx("span",{style:{fontSize:"0.85rem",color:"#666"},children:s.email})]})}),e.jsx("td",{"data-label":"Message",children:s.message}),e.jsx("td",{"data-label":"Date",children:new Date(s.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-label":"Notes",children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:s.notes?e.jsx("button",{className:"action-btn view-notes-btn",onClick:()=>se(s,"view","contact"),title:"View Notes",children:"ðŸ‘ï¸"}):e.jsx("button",{className:"action-btn edit-notes-btn",onClick:()=>se(s,"edit","contact"),title:"Add Notes",children:"âœï¸"})})}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[e.jsx("a",{href:`tel:${s.phone}`,className:"action-btn call-btn",title:"Call",children:"ðŸ“ž"}),e.jsx("a",{href:`mailto:${s.email}`,className:"action-btn email-btn",title:"Send Email",children:"âœ‰ï¸"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>Ve(s.id),title:"Delete",children:"ðŸ—‘"})]})}),e.jsx("td",{"data-label":"Status",children:e.jsxs("select",{className:"status-dropdown",value:s.workflow_status||"",onChange:t=>ze(s.id,t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"need_to_call",children:"Need to call"}),e.jsx("option",{value:"need_to_share_pictures",children:"Need to Share the pictures"}),e.jsx("option",{value:"waiting_for_confirmation",children:"Waiting for confirmation"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},s.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{textAlign:"center"},children:"No enquiries found."})})]})]})})}),be&&e.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:e.jsxs(j.div,{className:"modal-content export-modal",onClick:s=>s.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Export Contact Enquiries"}),e.jsx("button",{className:"modal-close",onClick:()=>H(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1.5rem",color:"#666"},children:"Choose your preferred export format:"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option-btn excel-btn",onClick:we,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"export-label",children:"Excel (.xlsx)"}),e.jsx("span",{className:"export-desc",children:"Best for spreadsheet analysis"})]}),e.jsxs("button",{className:"export-option-btn csv-btn",onClick:ve,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“„"}),e.jsx("span",{className:"export-label",children:"CSV (.csv)"}),e.jsx("span",{className:"export-desc",children:"Universal format"})]}),e.jsxs("button",{className:"export-option-btn json-btn",onClick:ye,children:[e.jsx("span",{className:"export-icon",children:"ðŸ”§"}),e.jsx("span",{className:"export-label",children:"JSON (.json)"}),e.jsx("span",{className:"export-desc",children:"For developers"})]})]})]})]})})]})},pa=()=>{const a=Ne;return e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Collection Enquiries"}),e.jsx("p",{children:"View and manage enquiries from the collections page."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Notifications",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),p.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:p.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsx(j.div,{className:"recent-orders",variants:Ee,initial:"hidden",animate:"show",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Design Info"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[a.map(s=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Name",children:s.name}),e.jsx("td",{"data-label":"Contact",children:e.jsxs("div",{className:"cell-content",children:[e.jsx("div",{style:{fontWeight:"500"},children:s.phone}),e.jsx("div",{style:{fontSize:"0.85em",color:"#666"},children:s.email})]})}),e.jsx("td",{"data-label":"Design Info",children:e.jsxs("div",{className:"cell-content",children:[e.jsx("div",{style:{fontWeight:"bold",color:"#be185d"},children:s.design_name}),s.selected_sets&&e.jsxs("div",{style:{fontSize:"0.9em"},children:["Sets: ",s.selected_sets]})]})}),e.jsx("td",{"data-label":"Message",children:s.message}),e.jsx("td",{"data-label":"Date",children:new Date(s.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-label":"Notes",children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:s.notes?e.jsx("button",{className:"action-btn view-notes-btn",onClick:()=>se(s,"view","collection"),title:"View Notes",children:"ðŸ‘ï¸"}):e.jsx("button",{className:"action-btn edit-notes-btn",onClick:()=>se(s,"edit","collection"),title:"Add Notes",children:"âœï¸"})})}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("a",{href:`tel:${s.phone}`,className:"action-btn call-btn",title:"Call",children:"ðŸ“ž"}),e.jsx("a",{href:`mailto:${s.email}`,className:"action-btn email-btn",title:"Send Email",children:"âœ‰ï¸"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>He(s.id),title:"Delete",children:"ðŸ—‘"})]})}),e.jsx("td",{"data-label":"Status",children:e.jsxs("select",{className:"status-dropdown",value:s.workflow_status||"",onChange:t=>Be(s.id,t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"need_to_call",children:"Need to call"}),e.jsx("option",{value:"need_to_share_pictures",children:"Need to Share the pictures"}),e.jsx("option",{value:"waiting_for_confirmation",children:"Waiting for confirmation"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},s.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{textAlign:"center"},children:"No collection enquiries found."})})]})]})})}),be&&e.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:e.jsxs(j.div,{className:"modal-content export-modal",onClick:s=>s.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Export Collection Enquiries"}),e.jsx("button",{className:"modal-close",onClick:()=>H(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1.5rem",color:"#666"},children:"Choose your preferred export format:"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option-btn excel-btn",onClick:we,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"export-label",children:"Excel (.xlsx)"}),e.jsx("span",{className:"export-desc",children:"Best for spreadsheet analysis"})]}),e.jsxs("button",{className:"export-option-btn csv-btn",onClick:ve,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“„"}),e.jsx("span",{className:"export-label",children:"CSV (.csv)"}),e.jsx("span",{className:"export-desc",children:"Universal format"})]}),e.jsxs("button",{className:"export-option-btn json-btn",onClick:ye,children:[e.jsx("span",{className:"export-icon",children:"ðŸ”§"}),e.jsx("span",{className:"export-label",children:"JSON (.json)"}),e.jsx("span",{className:"export-desc",children:"For developers"})]})]})]})]})})]})};c.useRef(null),c.useRef(null);const ga=()=>e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"dashboard-overview",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsx("div",{className:"header-title",children:e.jsx("h1",{children:"Dashboard Overview"})})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),p.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:p.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",onClick:()=>h("contact-inquiries"),children:[e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Contact Enquiries"}),e.jsx("p",{className:"stat-value",children:p.filter(a=>!a.message||!a.message.startsWith("[Collection Enquiry]")).length})]}),e.jsx("button",{className:"view-more-btn",children:"View More â†’"})]}),e.jsxs("div",{className:"stat-card",onClick:()=>h("collection-inquiries"),children:[e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Collection Enquiries"}),e.jsx("p",{className:"stat-value",children:Ne.length})]}),e.jsx("button",{className:"view-more-btn",children:"View More â†’"})]})]})]}),xa=()=>{const a=(s,t)=>{if(t==="up"&&s===0||t==="down"&&s===R.length-1)return;const l=[...R],o=t==="up"?s-1:s+1;[l[s],l[o]]=[l[o],l[s]],B(l)};return e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsx("div",{className:"header-title",children:e.jsx("h1",{children:"Collections"})})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),p.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:p.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Collection"}),e.jsxs("form",{onSubmit:Ke,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:L.name,onChange:s=>te({...L,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image"}),e.jsx("input",{id:"collection-image-input",type:"file",accept:"image/*",onChange:Ze,ref:oe,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:Re,children:"Add Collection"})]})]}),e.jsx("div",{className:"admin-gallery-grid",children:R.map((s,t)=>e.jsxs("div",{className:"admin-gallery-item collection-card",children:[e.jsxs("div",{className:"reorder-arrows-top-left",children:[e.jsx("button",{className:"btn-arrow",onClick:()=>a(t,"up"),disabled:t===0,title:"Move Left",children:"â†"}),e.jsx("button",{className:"btn-arrow",onClick:()=>a(t,"down"),disabled:t===R.length-1,title:"Move Right",children:"â†’"})]}),e.jsx("img",{src:s.image,alt:s.name}),e.jsx("div",{className:"collection-overlay-center",children:e.jsxs("button",{className:"btn-add-designs",onClick:()=>Qe(s),children:[e.jsx("span",{children:"+"})," Add Designs"]})}),e.jsxs("div",{className:"item-actions",children:[e.jsx("div",{className:"collection-name-text",children:s.name}),e.jsxs("div",{className:"collection-action-btns",children:[e.jsx("button",{className:"btn-edit",onClick:()=>Fe(s),children:"âœï¸"}),e.jsx("button",{className:"btn-delete",onClick:()=>Ye(s.id,s.storage_path),children:"Delete"})]})]})]},s.id))}),S.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:ue,children:e.jsxs(j.div,{className:"popup-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Edit Collection"}),e.jsx("button",{className:"close-popup-btn",onClick:ue,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsxs("form",{onSubmit:Oe,id:"edit-collection-form",className:"popup-form",children:[e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Name"}),e.jsx("input",{type:"text",className:"popup-input",value:S.name,onChange:s=>Y({...S,name:s.target.value}),required:!0,placeholder:"Collection Name"})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Update Image"}),e.jsx("input",{type:"file",className:"popup-file-input",onChange:s=>Y({...S,image:s.target.files[0]}),accept:"image/*"})]})]})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{type:"submit",form:"edit-collection-form",className:"popup-btn-primary",children:"Update"})})]})})]})},fa=()=>y?e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("button",{style:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",marginRight:"10px"},onClick:()=>h("collections"),children:"Collections >"}),e.jsxs("h1",{children:[y.name," Designs"]})]})]})}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add Design Plate"}),e.jsxs("form",{onSubmit:ea,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:_.name,onChange:a=>Z({..._,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Set Count (e.g. 5, 7)"}),e.jsx("input",{type:"text",value:_.plate_count,onChange:a=>Z({..._,plate_count:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image"}),e.jsx("input",{id:"design-image-input",type:"file",accept:"image/*",onChange:a=>Z({..._,image:a.target.files[0]}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:ie,children:"Add"})]})]}),e.jsx("div",{className:"admin-gallery-grid",children:le.map(a=>e.jsxs("div",{className:"admin-gallery-item collection-card",children:[e.jsx("img",{src:a.image,alt:a.name}),e.jsxs("div",{className:"design-item-actions",children:[e.jsxs("div",{className:"design-info-text",children:[e.jsx("strong",{children:a.name}),e.jsxs("div",{className:"set-count-badge",children:[a.plate_count," sets"]})]}),e.jsxs("div",{className:"action-buttons-row",children:[e.jsx("button",{className:"btn-edit",onClick:()=>sa(a),title:"Edit",children:"âœï¸"}),e.jsx("button",{className:"btn-delete",onClick:()=>aa(a.id,a.storage_path),title:"Delete",children:"ðŸ—‘ï¸"})]})]})]},a.id))}),C.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:ge,children:e.jsxs(j.div,{className:"popup-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Edit Design Plate"}),e.jsx("button",{className:"close-popup-btn",onClick:ge,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsxs("form",{onSubmit:ta,id:"edit-design-form",className:"popup-form",children:[e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Name"}),e.jsx("input",{type:"text",className:"popup-input",value:C.name,onChange:a=>J({...C,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Set Count (e.g. 5, 7)"}),e.jsx("input",{type:"text",className:"popup-input",value:C.plate_count,onChange:a=>J({...C,plate_count:a.target.value}),required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Update Image"}),e.jsx("input",{type:"file",className:"popup-file-input",onChange:a=>J({...C,image:a.target.files[0]}),accept:"image/*"}),e.jsx("p",{className:"help-text",children:"Leave empty to keep current image"})]})]})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{type:"submit",form:"edit-design-form",className:"popup-btn-primary",disabled:ie,children:ie?"Updating...":"Update Design"})})]})})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading collection designs..."}),ja=()=>e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Gallery Management"}),e.jsx("p",{children:"Manage photos and videos for your gallery."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),p.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:p.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Photos"}),e.jsxs("form",{onSubmit:la,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos (Multiple allowed)"}),e.jsx("input",{id:"media-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Photos (",x.length,")"]})}),e.jsxs(ke,{axis:"y",values:x,onReorder:a=>{w(a),_e(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[x.map((a,s)=>e.jsxs(Me,{item:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:t=>{t.stopPropagation(),O(s,-1,"image")},disabled:s===0,style:{opacity:s===0?.5:1,cursor:s===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:t=>{t.stopPropagation(),O(s,1,"image")},disabled:s===x.length-1,style:{opacity:s===x.length-1?.5:1,cursor:s===x.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>Se(a.url||a.src,`gallery-${a.id}.png`),children:e.jsx(De,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>na(a.id,"image",a.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),O(s,-1,"image")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),O(s,1,"image")},children:"â†“"})]})]},a.id)),x.length===0&&e.jsx("p",{className:"no-images",children:"No photos in gallery."})]})]}),Na=()=>e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"settings-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{children:"Manage your profile and security preferences."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),p.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:p.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Profile Settings"}),e.jsxs("div",{className:"profile-upload-section",children:[e.jsx("div",{className:"current-avatar",children:d.image?e.jsx("img",{src:d.image,alt:"Profile"}):e.jsx("div",{className:"avatar-placeholder",children:"AD"})}),e.jsxs("div",{className:"upload-controls",children:[e.jsxs("label",{className:"btn-secondary",children:["Change Profile Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:ca,hidden:!0})]}),d.image&&e.jsx("button",{className:"btn-remove-photo",onClick:da,children:"Remove Photo"}),e.jsx("p",{className:"help-text",children:"Recommended: Square JPG, PNG"})]})]})]}),e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Security"}),e.jsxs("form",{onSubmit:ma,className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Password"}),e.jsx("input",{type:"password",placeholder:"Enter new password",value:G.newPassword,onChange:a=>me({...G,newPassword:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:G.confirmPassword,onChange:a=>me({...G,confirmPassword:a.target.value}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Change Password"})]})]})]})]}),ba=()=>e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:F,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Homepage Gallery Management"}),e.jsx("p",{children:"Manage images displayed on the home page gallery section."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),p.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:p.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Images"}),e.jsxs("form",{onSubmit:oa,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos from Device (Multiple allowed)"}),e.jsx("input",{id:"home-image-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Homepage Photos (",P.length,")"]})}),e.jsxs(ke,{axis:"y",values:P,onReorder:a=>{U(a),Ae(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[P.map((a,s)=>e.jsxs(Me,{item:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:t=>{t.stopPropagation(),O(s,-1,"home")},disabled:s===0,style:{opacity:s===0?.5:1,cursor:s===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:t=>{t.stopPropagation(),O(s,1,"home")},disabled:s===P.length-1,style:{opacity:s===P.length-1?.5:1,cursor:s===P.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>Se(a.url||a.src,`home-gallery-${a.id}.png`),children:e.jsx(De,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>ra(a.id,a.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),O(s,-1,"home")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),O(s,1,"home")},children:"â†“"})]})]},a.id)),P.length===0&&e.jsx("p",{className:"no-images",children:"No photos in homepage gallery."})]})]});return c.useEffect(()=>{if(f==="collections"&&M&&R.length>0)try{const a=decodeURIComponent(M),s=R.find(t=>t.name===a);s&&(!y||y.id!==s.id)&&qe(s)}catch(a){console.error("URL Parameter Error:",a)}},[f,M,R,y]),e.jsxs("div",{className:`admin-dashboard ${I?"sidebar-open":""}`,children:[e.jsxs(Sa,{children:[e.jsx("title",{children:"Admin Dashboard | Venbha Plate Decors"}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),I&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>g(!1)}),e.jsxs("aside",{className:`dashboard-sidebar ${I?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header-mobile",children:[e.jsx("div",{className:"sidebar-brand",children:e.jsx("img",{src:Ea,alt:"Venbha Admin",className:"sidebar-logo"})}),e.jsx("button",{className:"close-sidebar-btn",onClick:()=>g(!1),children:"Ã—"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("a",{className:`nav-item ${r==="dashboard"?"active":""}`,onClick:()=>{h("dashboard"),g(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“Š"})," Dashboard"]}),e.jsxs("div",{className:"nav-item-container",onMouseEnter:()=>ce(!0),onMouseLeave:()=>ce(!1),children:[e.jsxs("a",{className:`nav-item ${r==="gallery"||r==="home-gallery"?"active":""}`,onClick:()=>ce(!re),children:[e.jsx("span",{className:"nav-icon",children:"ðŸ–¼ï¸"})," Gallery",e.jsx("span",{className:"dropdown-arrow",style:{marginLeft:"auto",fontSize:"0.8em"},children:re?"â–¼":"â–¶"})]}),re&&e.jsxs("div",{className:"sub-menu",children:[e.jsx("a",{className:`sub-nav-item ${r==="gallery"?"active":""}`,onClick:()=>{h("gallery"),g(!1)},children:"Gallery Page"}),e.jsx("a",{className:`sub-nav-item ${r==="home-gallery"?"active":""}`,onClick:()=>{h("home-gallery"),g(!1)},children:"Homepage Gallery"})]})]}),e.jsxs("a",{className:`nav-item ${r==="collections"?"active":""}`,onClick:()=>{h("collections"),g(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“‚"})," Collections"]}),e.jsxs("a",{className:`nav-item ${r==="settings"?"active":""}`,onClick:()=>{h("settings"),g(!1)},children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"})," Settings"]}),e.jsxs("a",{className:"nav-item logout-btn",onClick:ha,style:{marginTop:"auto",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"1rem"},children:[e.jsx("span",{className:"nav-icon",children:"ðŸšª"})," Logout"]})]})]}),e.jsxs("main",{className:"dashboard-main",children:[r==="dashboard"&&ga(),r==="contact-inquiries"&&ua(),r==="collection-inquiries"&&pa(),r==="gallery"&&ja(),r==="home-gallery"&&ba(),r==="collections"&&xa(),r==="collection-designs"&&fa(),r==="settings"&&Na()]}),Te&&e.jsx("div",{className:"popup-overlay",onClick:he,children:e.jsxs(j.div,{className:"popup-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Notification"}),e.jsx("button",{className:"close-popup-btn",onClick:he,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsx("p",{children:Ue})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{className:"popup-btn-primary",onClick:he,children:"OK"})})]})}),Ge&&e.jsx("div",{className:"popup-overlay",onClick:()=>q(!1),children:e.jsxs(j.div,{className:"popup-content delete-confirm",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"popup-header",children:e.jsx("h3",{children:"âš ï¸ Confirm Delete"})}),e.jsx("div",{className:"popup-body",children:m?.handler==="contact"?e.jsx("p",{children:"Are you sure you want to delete this Message?"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure you want to delete this item?"}),e.jsx("p",{className:"warning-text",children:"This action cannot be undone."})]})}),e.jsxs("div",{className:"popup-footer",children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>q(!1),children:"Cancel"}),e.jsx("button",{className:"popup-btn-danger",onClick:ia,children:"Delete"})]})]})}),b.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:W,children:e.jsxs(j.div,{className:"popup-content notes-modal",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:b.mode==="edit"?"âœï¸ Edit Notes":"ðŸ‘ï¸ View Notes"}),e.jsx("button",{className:"close-popup-btn",onClick:W,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:b.mode==="edit"?e.jsx("textarea",{className:"notes-modal-textarea",placeholder:"Add your notes here...",value:b.notes,onChange:a=>$e(a.target.value),rows:"6",autoFocus:!0}):e.jsx("div",{className:"notes-view-content",children:b.notes||"No notes available"})}),e.jsx("div",{className:"popup-footer",children:b.mode==="edit"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:W,children:"Cancel"}),e.jsx("button",{className:"popup-btn-primary",onClick:Le,children:"Save Notes"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>ae(a=>({...a,mode:"edit"})),children:"Edit"}),e.jsx("button",{className:"popup-btn-primary",onClick:W,children:"Close"})]})})]})})]})};export{ls as default};
