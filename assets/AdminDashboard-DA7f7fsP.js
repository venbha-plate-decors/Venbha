import{f as Ss,r as c,e as ks,j as e,m as w,h as Re,i as Ds,k as Is}from"./vendor-C4MZbRyZ.js";import{s as Q,u as _s,H as As,l as Ms}from"./index-DhZOSC96.js";import{D as Te}from"./ui-h3E-pYNY.js";import{b as Rs,d as Ue,c as Ts,a as Us,f as qs,u as qe,e as Ge,g as Gs,h as Fs,i as $s,j as Os,k as Vs,l as Ls,m as Bs,n as Hs,o as zs,p as Js,q as Ws,r as Xs,s as Zs}from"./databaseUtils-sm7AiFeG.js";import{f as Ks,u as Ys,d as Qs,b as ea,c as sa}from"./contactUtils-DJYrV3Q1.js";import{f as aa,u as ta,d as la,b as na,c as ia}from"./collectionUtils-DNGgMqzK.js";const oa=async(f,E=1920,j=1080,y=.85)=>new Promise((A,p)=>{const N=new FileReader;N.readAsDataURL(f),N.onload=P=>{const r=new Image;r.src=P.target.result,r.onload=()=>{const b=document.createElement("canvas");let x=r.width,S=r.height;x>S?x>E&&(S=Math.round(S*E/x),x=E):S>j&&(x=Math.round(x*j/S),S=j),b.width=x,b.height=S,b.getContext("2d").drawImage(r,0,0,x,S),b.toBlob(O=>{if(O){const F=new File([O],f.name.replace(/\.[^/.]+$/,"")+".webp",{type:"image/webp",lastModified:Date.now()});A(F)}else p(new Error("Failed to compress image"))},"image/webp",y)},r.onerror=()=>{p(new Error("Failed to load image"))}},N.onerror=()=>{p(new Error("Failed to read file"))}}),X=async(f,E="Gallery",j="images")=>{try{const y=await oa(f),p=`${Date.now()}_${Math.random().toString(36).substring(7)}.webp`,N=`${j}/${p}`,{data:P,error:r}=await Q.storage.from(E).upload(N,y,{cacheControl:"3600",upsert:!1,contentType:"image/webp"});if(r)return console.error("Upload error:",r),{success:!1,error:r};const{data:{publicUrl:b}}=Q.storage.from(E).getPublicUrl(N);return{success:!0,url:b,path:N}}catch(y){return console.error("Upload error:",y),{success:!1,error:y}}},_=async(f,E="Gallery")=>{try{const{error:j}=await Q.storage.from(E).remove([f]);return j?(console.error("Delete error:",j),{success:!1,error:j}):{success:!0}}catch(j){return console.error("Delete error:",j),{success:!1,error:j}}},ra=async(f,E="Gallery",j="videos")=>{try{const y=f.name.split(".").pop(),A=`${Date.now()}_${Math.random().toString(36).substring(7)}.${y}`,p=`${j}/${A}`,{data:N,error:P}=await Q.storage.from(E).upload(p,f,{cacheControl:"3600",upsert:!1,contentType:f.type});if(P)return console.error("Upload error:",P),{success:!1,error:P};const{data:{publicUrl:r}}=Q.storage.from(E).getPublicUrl(p);return{success:!0,url:r,path:p}}catch(y){return console.error("Upload error:",y),{success:!1,error:y}}},Fe=({item:f,children:E,className:j,...y})=>{const A=Ds(),p=c.useRef(null),N=r=>{p.current=setTimeout(()=>{navigator.vibrate&&navigator.vibrate(50),A.start(r)},2e3)},P=()=>{p.current&&(clearTimeout(p.current),p.current=null)};return e.jsx(Is,{value:f,dragListener:!1,dragControls:A,className:j,...y,onMouseDown:r=>A.start(r),onTouchStart:N,onTouchEnd:P,onTouchMove:P,children:E})},ga=()=>{const f=Ss(),{user:E,signOut:j,updatePassword:y}=_s(),[A,p]=c.useState(!1),{tab:N,subParam:P}=ks();let r=N||"dashboard";N==="collections"&&P&&(r="collection-designs");const b=s=>{f(`/admin_dashboard/${s}`)};c.useEffect(()=>{if(N)localStorage.setItem("adminActiveTab",N);else{const s=localStorage.getItem("adminActiveTab");s&&s!=="dashboard"&&f(`/admin_dashboard/${s}`,{replace:!0})}},[N,f]);const[x,S]=c.useState([]),[R,O]=c.useState([]),[F,ee]=c.useState([]),[V,ye]=c.useState("photos"),[q,Z]=c.useState([]),[z,ce]=c.useState({name:"",image:null}),[$e,se]=c.useState(!1),[k,Oe]=c.useState(()=>{try{const s=localStorage.getItem("adminSelectedCollection");return s?JSON.parse(s):null}catch{return null}});c.useEffect(()=>{k?localStorage.setItem("adminSelectedCollection",JSON.stringify(k)):localStorage.removeItem("adminSelectedCollection")},[k]);const[de,me]=c.useState([]),[U,ae]=c.useState({name:"",image:null,plate_count:""}),[he,te]=c.useState(!1),[D,K]=c.useState({isOpen:!1,id:null,name:"",plate_count:"",image:null,currentImage:"",storagePath:""}),ue=c.useRef(null),[T,le]=c.useState({isOpen:!1,id:null,name:"",image:null,currentImage:"",storagePath:""}),[pe,ge]=c.useState(!1),[d,xe]=c.useState({name:"Admin User",image:null}),[L,fe]=c.useState({newPassword:"",confirmPassword:""}),[Ve,n]=c.useState(!1),[Le,i]=c.useState(""),[Be,$]=c.useState(!1),[m,J]=c.useState(null),je=()=>n(!1),[u,ne]=c.useState([]),[g,ie]=c.useState([]),[C,oe]=c.useState({isOpen:!1,mode:"edit",entryId:null,notes:"",type:"contact"}),[Ce,W]=c.useState(!1),re=(s,a,t="contact")=>{oe({isOpen:!0,mode:a,entryId:s.id,notes:s.notes||"",type:t})},He=s=>{le({isOpen:!0,id:s.id,name:s.name,image:null,currentImage:s.image,storagePath:s.storage_path})},Ne=()=>{le({isOpen:!1,id:null,name:"",image:null,currentImage:"",storagePath:""})},ze=async s=>{s.preventDefault(),se(!0),i("Updating collection..."),n(!0);try{let a={name:T.name},t=T.storagePath;if(T.image){T.storagePath&&await _(T.storagePath);const o=await X(T.image,"Gallery","collections");if(!o.success)throw new Error("Image upload failed");a.image=o.url,a.storage_path=o.path}const l=await Js(T.id,a);if(l.success)Z(q.map(o=>o.id===T.id?l.data:o)),i("Collection updated successfully!"),setTimeout(()=>n(!1),2e3),Ne();else throw new Error(l.error.message||"Update failed")}catch(a){console.error(a),i("Failed to update collection."),setTimeout(()=>n(!1),2e3)}finally{se(!1)}},Y=()=>{oe({isOpen:!1,mode:"edit",entryId:null,notes:""})},Je=s=>{oe(a=>({...a,notes:s}))},We=async()=>{let s;C.type==="collection"?(s=await na(C.entryId,C.notes),s.success&&ie(a=>a.map(t=>t.id===C.entryId?{...t,notes:C.notes}:t))):(s=await ea(C.entryId,C.notes),s.success&&ne(a=>a.map(t=>t.id===C.entryId?{...t,notes:C.notes}:t))),s.success?(i("Notes saved successfully!"),n(!0),setTimeout(()=>n(!1),2e3),Y()):(i("Failed to save notes"),n(!0))},Xe=s=>{J({id:s,handler:"contact"}),$(!0)},Ze=s=>{J({id:s,handler:"collection_enquiry"}),$(!0)},Ke=async(s,a)=>{(await sa(s,a===""?null:a)).success?(ne(l=>l.map(o=>o.id===s?{...o,workflow_status:a}:o)),i("Status updated successfully!"),n(!0),setTimeout(()=>n(!1),2e3)):(i("Failed to update status"),n(!0))},Ye=async(s,a)=>{(await ia(s,a===""?null:a)).success?(ie(l=>l.map(o=>o.id===s?{...o,workflow_status:a}:o)),i("Status updated successfully!"),n(!0),setTimeout(()=>n(!1),2e3)):(i("Failed to update status"),n(!0))},Ee=()=>{const s=["Name","Email","Phone","Message","Date","Notes","Status"],a=u.map(l=>[l.name,l.email,l.phone,l.message,new Date(l.created_at).toLocaleString("en-IN"),l.notes||"",l.workflow_status||"Not Set"]),t=[s.join(","),...a.map(l=>l.map(o=>`"${String(o).replace(/"/g,'""')}"`).join(","))].join(`
`);be(t,"contact-enquiries.csv","text/csv"),W(!1),i("Exported to CSV successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},Pe=()=>{const s=u.map(l=>({Name:l.name,Email:l.email,Phone:l.phone,Message:l.message,Date:new Date(l.created_at).toLocaleString("en-IN"),Notes:l.notes||"",Status:l.workflow_status||"Not Set"})),a=Object.keys(s[0]||{}),t=[a.join(","),...s.map(l=>a.map(o=>`"${String(l[o]).replace(/"/g,'""')}"`).join(","))].join(`
`);be(t,"contact-enquiries.xlsx","application/vnd.ms-excel"),W(!1),i("Exported to Excel successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},Se=()=>{const s=u.map(t=>({name:t.name,email:t.email,phone:t.phone,message:t.message,date:new Date(t.created_at).toISOString(),notes:t.notes||"",status:t.workflow_status||"Not Set"})),a=JSON.stringify(s,null,2);be(a,"contact-enquiries.json","application/json"),W(!1),i("Exported to JSON successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},be=(s,a,t)=>{const l=new Blob([s],{type:t}),o=URL.createObjectURL(l),h=document.createElement("a");h.href=o,h.download=a,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(o)},B=()=>{p(!A)};c.useEffect(()=>{Qe(),ke(),De();const s=localStorage.getItem("adminProfile");s&&xe(JSON.parse(s))},[]),c.useEffect(()=>{r==="contact-inquiries"&&u.length>0&&es()},[r]);const Qe=async()=>{try{const s=await Rs();s.success&&S(s.data);const a=await Ue();a.success&&O(a.data);const t=await Ts();t.success&&ee(t.data);const l=await Us();l.success&&Z(l.data)}catch(s){console.error("Error loading gallery data:",s)}},ke=async()=>{try{const s=await Ks();s.success&&ne(s.data)}catch(s){console.error("Error loading contact entries:",s)}},De=async()=>{try{const s=await aa();s.success&&ie(s.data)}catch(s){console.error("Error loading collection entries:",s)}},es=async()=>{try{const s=u.filter(a=>a.status==="new");for(const a of s)await Ys(a.id,"read");await ke()}catch(s){console.error("Error marking messages as read:",s)}},ss=async()=>{try{const s=g.filter(a=>a.status==="new");for(const a of s)await ta(a.id,"read");s.length>0&&await De()}catch(s){console.error("Error marking collection entries as read:",s)}};c.useEffect(()=>{r==="collection-inquiries"&&g.length>0&&ss()},[r,g]);const H=()=>{const s=u.some(t=>t.status==="new"),a=g.some(t=>t.status==="new");b(s?"contact-inquiries":a?"collection-inquiries":"contact-inquiries")},as=s=>{s.target.files[0]&&ce({...z,image:s.target.files[0]})},ts=async s=>{if(s.preventDefault(),!z.name||!z.image){i("Please fill all fields"),n(!0);return}se(!0),i("Adding collection..."),n(!0);try{const a=await X(z.image,"Gallery","collections");if(!a.success)throw new Error("Image upload failed");const t=await zs({name:z.name,image:a.url,storage_path:a.path});if(t.success)Z([t.data,...q]),ce({name:"",image:null}),ue.current&&(ue.current.value=""),i("Collection added successfully!"),setTimeout(()=>n(!1),2e3);else throw await _(a.path),new Error(t.error.message||"Database error")}catch(a){console.error(a),i("Failed to add collection.")}finally{se(!1)}},ls=(s,a)=>{J({id:s,storagePath:a,handler:"collection"}),$(!0)},ns=s=>{f(`/admin_dashboard/collections/${encodeURIComponent(s.name)}`)},Ie=async s=>{try{const a=await qs(s);a.success&&me(a.data)}catch(a){console.error("Error loading designs:",a)}};c.useEffect(()=>{r==="collection-designs"&&k&&Ie(k.id)},[k,r]);const is=async s=>{if(s.preventDefault(),!U.name||!U.image||!U.plate_count||!k){i("Please fill all fields."),n(!0);return}te(!0),i("Adding design plate..."),n(!0);try{const a=await X(U.image,"Gallery","designs");if(!a.success)throw new Error("Image upload failed");const t=await Ws({collection_id:k.id,name:U.name,image:a.url,storage_path:a.path,plate_count:U.plate_count});if(!t.success)throw await _(a.path),new Error(t.error.message||"Database error");await Ie(k.id),ae({name:"",image:null,plate_count:""});const l=document.getElementById("design-image-input");l&&(l.value=""),i("Design plate added successfully!"),setTimeout(()=>n(!1),2e3)}catch(a){console.error(a),i(a.message||"Failed to add design.")}finally{te(!1)}},os=(s,a)=>{J({id:s,storagePath:a,handler:"design"}),$(!0)},rs=s=>{K({isOpen:!0,id:s.id,name:s.name,plate_count:s.plate_count,image:null,currentImage:s.image,storagePath:s.storage_path})},ve=()=>{K({isOpen:!1,id:null,name:"",plate_count:"",image:null,currentImage:"",storagePath:""})},cs=async s=>{s.preventDefault(),te(!0),i("Updating design..."),n(!0);try{let a={name:D.name,plate_count:D.plate_count};if(D.image){D.storagePath&&await _(D.storagePath);const l=await X(D.image,"Gallery","designs");if(!l.success)throw new Error("Image upload failed");a.image=l.url,a.storage_path=l.path}const t=await Xs(D.id,a);if(t.success)me(de.map(l=>l.id===D.id?t.data:l)),i("Design updated successfully!"),setTimeout(()=>n(!1),2e3),ve();else throw new Error(t.error.message||"Update failed")}catch(a){console.error(a),i(a.message||"Failed to update design."),setTimeout(()=>n(!1),2e3)}finally{te(!1)}},ds=async s=>{s.preventDefault();const a=document.getElementById("media-upload"),t=Array.from(a.files);if(t.length!==0){i("Uploading and optimizing... Please wait."),n(!0);try{for(const v of t)if(v.size>10485760)throw new Error(`Image "${v.name}" is too large. Maximum size is 10MB. Current size: ${(v.size/1024/1024).toFixed(2)}MB`);const o=t.map(async v=>{let I;if(I=await X(v),!I.success)throw new Error(I.error.message||"Upload failed");const M=await Ls({url:I.url,storage_path:I.path,type:"image",alt:"Gallery Image"});if(!M.success)throw await _(I.path),new Error(M.error.message||"Database error");return M.data}),h=await Promise.all(o);S([...h,...x]),window.dispatchEvent(new Event("galleryUpdated")),i(`Successfully uploaded ${t.length} photo(s)!`),setTimeout(()=>n(!1),2e3),a.value=""}catch(l){console.error("Upload error:",l),i(`Error: ${l.message||"Failed to upload media"}`)}}},_e=(s,a,t)=>{J({id:s,type:a,storagePath:t,handler:"media"}),$(!0)},ms=async s=>{s.preventDefault();const a=document.getElementById("video-upload"),t=Array.from(a.files);if(t.length!==0){i("Uploading videos... Please wait."),n(!0);try{for(const v of t)if(v.size>52428800)throw new Error(`Video "${v.name}" is too large. Maximum size is 50MB.`);const o=t.map(async v=>{const I=await ra(v,"Gallery","videos");if(!I.success)throw new Error(I.error.message||"Upload failed");const M=await Bs({url:I.url,storage_path:I.path});if(!M.success)throw await _(I.path,"Gallery"),new Error(M.error.message||"Database error");return M.data}),h=await Promise.all(o);ee([...h,...F]),window.dispatchEvent(new Event("galleryUpdated")),i(`Successfully uploaded ${t.length} video(s)!`),setTimeout(()=>n(!1),2e3),a.value=""}catch(l){console.error("Upload error:",l),i(`Error: ${l.message||"Failed to upload videos"}`)}}},hs=async()=>{if(m)try{if(m.handler==="media"){if(m.type==="video"){if(!(await Gs(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await _(m.storagePath),ee(F.filter(a=>a.id!==m.id)),i("Video deleted successfully!")}else{if(!(await Fs(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await _(m.storagePath),S(x.filter(a=>a.id!==m.id)),i("Item deleted successfully!")}window.dispatchEvent(new Event("galleryUpdated")),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="home"){if(!(await $s(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await _(m.storagePath),O(R.filter(a=>a.id!==m.id)),window.dispatchEvent(new Event("galleryUpdated")),i("Image deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="collection"){if(!(await Os(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await _(m.storagePath),Z(q.filter(a=>a.id!==m.id)),i("Collection deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="contact")if((await Qs(m.id)).success)ne(a=>a.filter(t=>t.id!==m.id)),i("Contact entry deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3);else throw new Error("Failed to delete contact entry");else if(m.handler==="collection_enquiry")if((await la(m.id)).success)ie(a=>a.filter(t=>t.id!==m.id)),i("Collection entry deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3);else throw new Error("Failed to delete collection entry");else if(m.handler==="design"){if(!(await Vs(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await _(m.storagePath),me(de.filter(a=>a.id!==m.id)),i("Design deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}}catch(s){console.error("Delete error:",s),i("Error deleting item. Please try again."),n(!0)}finally{$(!1),J(null)}},us=async s=>{s.preventDefault();const a=await Ue(),t=a.success?a.data.length:R.length;if(t>=6){i("Maximum images is 6 only. Please delete any existing image to upload new ones."),n(!0);return}const l=document.getElementById("home-image-upload"),o=Array.from(l.files);if(o.length!==0){if(t+o.length>6){i(`You can only upload ${6-t} more image(s). Maximum is 6 images total.`),n(!0);return}i("Uploading and optimizing... Please wait."),n(!0);try{const h=o.map(async I=>{const M=await X(I,"Gallery","home_images");if(!M.success)throw new Error(M.error.message||"Upload failed");const we=await Hs({url:M.url,storage_path:M.path,alt:"Home Gallery Image"});if(!we.success)throw await _(M.path),new Error(we.error.message||"Database error");return we.data}),v=await Promise.all(h);O([...v,...R]),window.dispatchEvent(new Event("galleryUpdated")),l.value="",i(`Successfully uploaded ${o.length} image(s)!`),setTimeout(()=>n(!1),2e3)}catch(h){console.error("Upload error:",h),i(`Error: ${h.message||"Failed to upload images"}`)}}},G=(s,a,t)=>{let l=[],o=null,h=null;t==="image"?(l=[...x],o=S,h=qe):t==="home"?(l=[...R],o=O,h=Ge):t==="video"&&(l=[...F],o=ee,h=Zs);const v=s+a;v<0||v>=l.length||([l[s],l[v]]=[l[v],l[s]],o(l),h(l))},ps=(s,a)=>{J({id:s,storagePath:a,handler:"home"}),$(!0)},Ae=async(s,a)=>{try{i("Downloading..."),n(!0);const t=await fetch(s);if(!t.ok)throw new Error("Network response was not ok");const l=await t.blob(),o=window.URL.createObjectURL(l),h=document.createElement("a");h.href=o,h.download=a||"download",document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(o),setTimeout(()=>n(!1),1e3)}catch(t){console.error("Download failed:",t),i("Download failed. Opening in new tab..."),setTimeout(()=>n(!1),2e3),window.open(s,"_blank")}},gs=async s=>{const a=s.target.files[0];if(a)try{d.storagePath&&await _(d.storagePath,"Gallery"),i("Uploading profile image..."),n(!0);const t=await X(a,"Gallery","profile_pics");if(t.success){const l={...d,image:t.url,storagePath:t.path};xe(l),localStorage.setItem("adminProfile",JSON.stringify(l)),i("Profile updated successfully!"),setTimeout(()=>n(!1),2e3)}else i("Failed to upload image"),setTimeout(()=>n(!1),2e3)}catch(t){console.error("Profile upload error:",t),i("Error updating profile"),setTimeout(()=>n(!1),2e3)}},xs=async()=>{if(window.confirm("Are you sure you want to remove the profile photo?"))try{d.storagePath&&await _(d.storagePath,"Gallery");const s={...d,image:null,storagePath:null};xe(s),localStorage.setItem("adminProfile",JSON.stringify(s)),i("Profile photo removed"),n(!0),setTimeout(()=>n(!1),2e3)}catch(s){console.error("Error removing profile photo:",s),i("Failed to remove photo"),n(!0)}},fs=async s=>{if(s.preventDefault(),L.newPassword!==L.confirmPassword){i("Passwords do not match!"),n(!0);return}if(L.newPassword.length<6){i("Password must be at least 6 characters long."),n(!0);return}try{const{error:a}=await y(L.newPassword);a?i(`Error updating password: ${a.message}`):(i("Password updated successfully!"),fe({newPassword:"",confirmPassword:""}))}catch{i("An error occurred while updating password.")}n(!0)},js=async()=>{if(window.confirm("Are you sure you want to logout?")){const{error:s}=await j();s?(i("Error logging out. Please try again."),n(!0)):f("/admin_login")}},Me={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},Ns=()=>{const s=u.filter(a=>!a.message||!a.message.startsWith("[Collection Enquiry]"));return e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Contact Enquiries"}),e.jsx("p",{children:"View and manage messages from the contact form."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length+g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length+g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsx(w.div,{className:"recent-orders",variants:Me,initial:"hidden",animate:"show",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"contact-enquiries-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[s.map(a=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Name",children:a.name}),e.jsx("td",{"data-label":"Contact",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontWeight:"500"},children:a.phone}),e.jsx("span",{style:{fontSize:"0.85rem",color:"#666"},children:a.email})]})}),e.jsx("td",{"data-label":"Message",children:a.message}),e.jsx("td",{"data-label":"Date",children:new Date(a.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-label":"Notes",children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:a.notes?e.jsx("button",{className:"action-btn view-notes-btn",onClick:()=>re(a,"view","contact"),title:"View Notes",children:"ðŸ‘ï¸"}):e.jsx("button",{className:"action-btn edit-notes-btn",onClick:()=>re(a,"edit","contact"),title:"Add Notes",children:"âœï¸"})})}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[e.jsx("a",{href:`tel:${a.phone}`,className:"action-btn call-btn",title:"Call",children:"ðŸ“ž"}),e.jsx("a",{href:`mailto:${a.email}`,className:"action-btn email-btn",title:"Send Email",children:"âœ‰ï¸"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>Xe(a.id),title:"Delete",children:"ðŸ—‘"})]})}),e.jsx("td",{"data-label":"Status",children:e.jsxs("select",{className:"status-dropdown",value:a.workflow_status||"",onChange:t=>Ke(a.id,t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"need_to_call",children:"Need to call"}),e.jsx("option",{value:"need_to_share_pictures",children:"Need to Share the pictures"}),e.jsx("option",{value:"waiting_for_confirmation",children:"Waiting for confirmation"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},a.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{textAlign:"center"},children:"No enquiries found."})})]})]})})}),Ce&&e.jsx("div",{className:"modal-overlay",onClick:()=>W(!1),children:e.jsxs(w.div,{className:"modal-content export-modal",onClick:a=>a.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Export Contact Enquiries"}),e.jsx("button",{className:"modal-close",onClick:()=>W(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1.5rem",color:"#666"},children:"Choose your preferred export format:"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option-btn excel-btn",onClick:Pe,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"export-label",children:"Excel (.xlsx)"}),e.jsx("span",{className:"export-desc",children:"Best for spreadsheet analysis"})]}),e.jsxs("button",{className:"export-option-btn csv-btn",onClick:Ee,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“„"}),e.jsx("span",{className:"export-label",children:"CSV (.csv)"}),e.jsx("span",{className:"export-desc",children:"Universal format"})]}),e.jsxs("button",{className:"export-option-btn json-btn",onClick:Se,children:[e.jsx("span",{className:"export-icon",children:"ðŸ”§"}),e.jsx("span",{className:"export-label",children:"JSON (.json)"}),e.jsx("span",{className:"export-desc",children:"For developers"})]})]})]})]})})]})},bs=()=>{const s=g;return e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Collection Enquiries"}),e.jsx("p",{children:"View and manage enquiries from the collections page."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length+g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length+g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsx(w.div,{className:"recent-orders",variants:Me,initial:"hidden",animate:"show",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Design Info"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[s.map(a=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Name",children:a.name}),e.jsx("td",{"data-label":"Contact",children:e.jsxs("div",{className:"cell-content",children:[e.jsx("div",{style:{fontWeight:"500"},children:a.phone}),e.jsx("div",{style:{fontSize:"0.85em",color:"#666"},children:a.email})]})}),e.jsx("td",{"data-label":"Design Info",children:e.jsxs("div",{className:"cell-content",children:[e.jsx("div",{style:{fontWeight:"bold",color:"#be185d"},children:a.design_name}),a.selected_sets&&e.jsxs("div",{style:{fontSize:"0.9em"},children:["Sets: ",a.selected_sets]})]})}),e.jsx("td",{"data-label":"Message",children:a.message}),e.jsx("td",{"data-label":"Date",children:new Date(a.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-label":"Notes",children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:a.notes?e.jsx("button",{className:"action-btn view-notes-btn",onClick:()=>re(a,"view","collection"),title:"View Notes",children:"ðŸ‘ï¸"}):e.jsx("button",{className:"action-btn edit-notes-btn",onClick:()=>re(a,"edit","collection"),title:"Add Notes",children:"âœï¸"})})}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("a",{href:`tel:${a.phone}`,className:"action-btn call-btn",title:"Call",children:"ðŸ“ž"}),e.jsx("a",{href:`mailto:${a.email}`,className:"action-btn email-btn",title:"Send Email",children:"âœ‰ï¸"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>Ze(a.id),title:"Delete",children:"ðŸ—‘"})]})}),e.jsx("td",{"data-label":"Status",children:e.jsxs("select",{className:"status-dropdown",value:a.workflow_status||"",onChange:t=>Ye(a.id,t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"need_to_call",children:"Need to call"}),e.jsx("option",{value:"need_to_share_pictures",children:"Need to Share the pictures"}),e.jsx("option",{value:"waiting_for_confirmation",children:"Waiting for confirmation"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},a.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{textAlign:"center"},children:"No collection enquiries found."})})]})]})})}),Ce&&e.jsx("div",{className:"modal-overlay",onClick:()=>W(!1),children:e.jsxs(w.div,{className:"modal-content export-modal",onClick:a=>a.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Export Collection Enquiries"}),e.jsx("button",{className:"modal-close",onClick:()=>W(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1.5rem",color:"#666"},children:"Choose your preferred export format:"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option-btn excel-btn",onClick:Pe,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"export-label",children:"Excel (.xlsx)"}),e.jsx("span",{className:"export-desc",children:"Best for spreadsheet analysis"})]}),e.jsxs("button",{className:"export-option-btn csv-btn",onClick:Ee,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“„"}),e.jsx("span",{className:"export-label",children:"CSV (.csv)"}),e.jsx("span",{className:"export-desc",children:"Universal format"})]}),e.jsxs("button",{className:"export-option-btn json-btn",onClick:Se,children:[e.jsx("span",{className:"export-icon",children:"ðŸ”§"}),e.jsx("span",{className:"export-label",children:"JSON (.json)"}),e.jsx("span",{className:"export-desc",children:"For developers"})]})]})]})]})})]})};c.useRef(null),c.useRef(null);const vs=()=>e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"dashboard-overview",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsx("div",{className:"header-title",children:e.jsx("h1",{children:"Dashboard Overview"})})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",onClick:()=>b("contact-inquiries"),children:[e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Contact Enquiries"}),e.jsx("p",{className:"stat-value",children:u.filter(s=>!s.message||!s.message.startsWith("[Collection Enquiry]")).length})]}),e.jsx("button",{className:"view-more-btn",children:"View More â†’"})]}),e.jsxs("div",{className:"stat-card",onClick:()=>b("collection-inquiries"),children:[e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Collection Enquiries"}),e.jsx("p",{className:"stat-value",children:g.length})]}),e.jsx("button",{className:"view-more-btn",children:"View More â†’"})]})]})]}),ws=()=>{const s=(a,t)=>{if(t==="up"&&a===0||t==="down"&&a===q.length-1)return;const l=[...q],o=t==="up"?a-1:a+1;[l[a],l[o]]=[l[o],l[a]],Z(l)};return e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsx("div",{className:"header-title",children:e.jsx("h1",{children:"Collections"})})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(a=>a.status==="new").length+g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(a=>a.status==="new").length+g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Collection"}),e.jsxs("form",{onSubmit:ts,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:z.name,onChange:a=>ce({...z,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image"}),e.jsx("input",{id:"collection-image-input",type:"file",accept:"image/*",onChange:as,ref:ue,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:$e,children:"Add Collection"})]})]}),e.jsx("div",{className:"admin-gallery-grid",children:q.map((a,t)=>e.jsxs("div",{className:"admin-gallery-item collection-card",children:[e.jsxs("div",{className:"reorder-arrows-top-left",children:[e.jsx("button",{className:"btn-arrow",onClick:()=>s(t,"up"),disabled:t===0,title:"Move Left",children:"â†"}),e.jsx("button",{className:"btn-arrow",onClick:()=>s(t,"down"),disabled:t===q.length-1,title:"Move Right",children:"â†’"})]}),e.jsx("img",{src:a.image,alt:a.name}),e.jsx("div",{className:"collection-overlay-center",children:e.jsxs("button",{className:"btn-add-designs",onClick:()=>ns(a),children:[e.jsx("span",{children:"+"})," Add Designs"]})}),e.jsxs("div",{className:"item-actions",children:[e.jsx("div",{className:"collection-name-text",children:a.name}),e.jsxs("div",{className:"collection-action-btns",children:[e.jsx("button",{className:"btn-edit",onClick:()=>He(a),children:"âœï¸"}),e.jsx("button",{className:"btn-delete",onClick:()=>ls(a.id,a.storage_path),children:"Delete"})]})]})]},a.id))}),T.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:Ne,children:e.jsxs(w.div,{className:"popup-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Edit Collection"}),e.jsx("button",{className:"close-popup-btn",onClick:Ne,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsxs("form",{onSubmit:ze,id:"edit-collection-form",className:"popup-form",children:[e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Name"}),e.jsx("input",{type:"text",className:"popup-input",value:T.name,onChange:a=>le({...T,name:a.target.value}),required:!0,placeholder:"Collection Name"})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Update Image"}),e.jsx("input",{type:"file",className:"popup-file-input",onChange:a=>le({...T,image:a.target.files[0]}),accept:"image/*"})]})]})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{type:"submit",form:"edit-collection-form",className:"popup-btn-primary",children:"Update"})})]})})]})},ys=()=>k?e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("button",{style:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",marginRight:"10px"},onClick:()=>b("collections"),children:"Collections >"}),e.jsxs("h1",{children:[k.name," Designs"]})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add Design Plate"}),e.jsxs("form",{onSubmit:is,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:U.name,onChange:s=>ae({...U,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Set Count (e.g. 5, 7)"}),e.jsx("input",{type:"text",value:U.plate_count,onChange:s=>ae({...U,plate_count:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image"}),e.jsx("input",{id:"design-image-input",type:"file",accept:"image/*",onChange:s=>ae({...U,image:s.target.files[0]}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:he,children:"Add"})]})]}),e.jsx("div",{className:"admin-gallery-grid",children:de.map(s=>e.jsxs("div",{className:"admin-gallery-item collection-card",children:[e.jsx("img",{src:s.image,alt:s.name}),e.jsxs("div",{className:"design-item-actions",children:[e.jsxs("div",{className:"design-info-text",children:[e.jsx("strong",{children:s.name}),e.jsxs("div",{className:"set-count-badge",children:[s.plate_count," sets"]})]}),e.jsxs("div",{className:"action-buttons-row",children:[e.jsx("button",{className:"btn-edit",onClick:()=>rs(s),title:"Edit",children:"âœï¸"}),e.jsx("button",{className:"btn-delete",onClick:()=>os(s.id,s.storage_path),title:"Delete",children:"ðŸ—‘ï¸"})]})]})]},s.id))}),D.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:ve,children:e.jsxs(w.div,{className:"popup-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Edit Design Plate"}),e.jsx("button",{className:"close-popup-btn",onClick:ve,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsxs("form",{onSubmit:cs,id:"edit-design-form",className:"popup-form",children:[e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Name"}),e.jsx("input",{type:"text",className:"popup-input",value:D.name,onChange:s=>K({...D,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Set Count (e.g. 5, 7)"}),e.jsx("input",{type:"text",className:"popup-input",value:D.plate_count,onChange:s=>K({...D,plate_count:s.target.value}),required:!0})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Update Image"}),e.jsx("input",{type:"file",className:"popup-file-input",onChange:s=>K({...D,image:s.target.files[0]}),accept:"image/*"}),e.jsx("p",{className:"help-text",children:"Leave empty to keep current image"})]})]})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{type:"submit",form:"edit-design-form",className:"popup-btn-primary",disabled:he,children:he?"Updating...":"Update Design"})})]})})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading collection designs..."}),Cs=()=>e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Gallery Management"}),e.jsx("p",{children:"Manage photos and videos for your gallery."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"tab-navigation",style:{marginBottom:"20px",display:"flex",gap:"10px"},children:[e.jsx("button",{className:`tab-btn ${V==="photos"?"active":""}`,onClick:()=>ye("photos"),style:{padding:"10px 20px",cursor:"pointer",borderRadius:"5px",border:"none",background:V==="photos"?"#c2185b":"#eee",color:V==="photos"?"white":"black"},children:"Photos"}),e.jsx("button",{className:`tab-btn ${V==="videos"?"active":""}`,onClick:()=>ye("videos"),style:{padding:"10px 20px",cursor:"pointer",borderRadius:"5px",border:"none",background:V==="videos"?"#c2185b":"#eee",color:V==="videos"?"white":"black"},children:"Videos"})]}),V==="photos"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Photos"}),e.jsxs("form",{onSubmit:ds,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos (Multiple allowed)"}),e.jsx("input",{id:"media-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Photos (",x.length,")"]})}),e.jsxs(Re,{axis:"y",values:x,onReorder:s=>{S(s),qe(s)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[x.map((s,a)=>e.jsxs(Fe,{item:s,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:s.url||s.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:t=>{t.stopPropagation(),G(a,-1,"image")},disabled:a===0,style:{opacity:a===0?.5:1,cursor:a===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:t=>{t.stopPropagation(),G(a,1,"image")},disabled:a===x.length-1,style:{opacity:a===x.length-1?.5:1,cursor:a===x.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>Ae(s.url||s.src,`gallery-${s.id}.png`),children:e.jsx(Te,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>_e(s.id,"image",s.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),G(a,-1,"image")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),G(a,1,"image")},children:"â†“"})]})]},s.id)),x.length===0&&e.jsx("p",{className:"no-images",children:"No photos in gallery."})]})]}),V==="videos"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Videos"}),e.jsxs("form",{onSubmit:ms,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Videos (Multiple allowed, Max 50MB each)"}),e.jsx("input",{id:"video-upload",type:"file",accept:"video/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Videos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Videos (",F.length,")"]})}),e.jsx("div",{className:"admin-gallery-grid",children:F.map((s,a)=>e.jsxs("div",{className:"admin-gallery-item video-card",children:[e.jsx("video",{src:s.url,controls:!0,style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"8px 8px 0 0"}}),e.jsxs("div",{className:"item-actions video-controls",children:[e.jsx("button",{className:"video-btn-move",title:"Move Backward",onClick:t=>{t.stopPropagation(),G(a,-1,"video")},disabled:a===0,children:"â†"}),e.jsx("button",{className:"video-btn-move",title:"Move Forward",onClick:t=>{t.stopPropagation(),G(a,1,"video")},disabled:a===F.length-1,children:"â†’"}),e.jsx("button",{className:"video-btn-delete",onClick:()=>_e(s.id,"video",s.storage_path),children:"Delete"})]})]},s.id))}),F.length===0&&e.jsx("p",{className:"no-images",children:"No videos in gallery."})]})]}),Es=()=>e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"settings-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{children:"Manage your profile and security preferences."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Profile Settings"}),e.jsxs("div",{className:"profile-upload-section",children:[e.jsx("div",{className:"current-avatar",children:d.image?e.jsx("img",{src:d.image,alt:"Profile"}):e.jsx("div",{className:"avatar-placeholder",children:"AD"})}),e.jsxs("div",{className:"upload-controls",children:[e.jsxs("label",{className:"btn-secondary",children:["Change Profile Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:gs,hidden:!0})]}),d.image&&e.jsx("button",{className:"btn-remove-photo",onClick:xs,children:"Remove Photo"}),e.jsx("p",{className:"help-text",children:"Recommended: Square JPG, PNG"})]})]})]}),e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Security"}),e.jsxs("form",{onSubmit:fs,className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Password"}),e.jsx("input",{type:"password",placeholder:"Enter new password",value:L.newPassword,onChange:s=>fe({...L,newPassword:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:L.confirmPassword,onChange:s=>fe({...L,confirmPassword:s.target.value}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Change Password"})]})]})]})]}),Ps=()=>e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:B,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Homepage Gallery Management"}),e.jsx("p",{children:"Manage images displayed on the home page gallery section."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:H,title:"New Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:u.filter(s=>s.status==="new").length+g.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[d.image?e.jsx("img",{src:d.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:d.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Images"}),e.jsxs("form",{onSubmit:us,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos from Device (Multiple allowed)"}),e.jsx("input",{id:"home-image-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Homepage Photos (",R.length,")"]})}),e.jsxs(Re,{axis:"y",values:R,onReorder:s=>{O(s),Ge(s)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[R.map((s,a)=>e.jsxs(Fe,{item:s,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:s.url||s.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:t=>{t.stopPropagation(),G(a,-1,"home")},disabled:a===0,style:{opacity:a===0?.5:1,cursor:a===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:t=>{t.stopPropagation(),G(a,1,"home")},disabled:a===R.length-1,style:{opacity:a===R.length-1?.5:1,cursor:a===R.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>Ae(s.url||s.src,`home-gallery-${s.id}.png`),children:e.jsx(Te,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>ps(s.id,s.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),G(a,-1,"home")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),G(a,1,"home")},children:"â†“"})]})]},s.id)),R.length===0&&e.jsx("p",{className:"no-images",children:"No photos in homepage gallery."})]})]});return c.useEffect(()=>{if(N==="collections"&&P&&q.length>0)try{const s=decodeURIComponent(P),a=q.find(t=>t.name===s);a&&(!k||k.id!==a.id)&&Oe(a)}catch(s){console.error("URL Parameter Error:",s)}},[N,P,q,k]),e.jsxs("div",{className:`admin-dashboard ${A?"sidebar-open":""}`,children:[e.jsxs(As,{children:[e.jsx("title",{children:"Admin Dashboard | Venbha Plate Decors"}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),A&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>p(!1)}),e.jsxs("aside",{className:`dashboard-sidebar ${A?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header-mobile",children:[e.jsx("div",{className:"sidebar-brand",children:e.jsx("img",{src:Ms,alt:"Venbha Admin",className:"sidebar-logo"})}),e.jsx("button",{className:"close-sidebar-btn",onClick:()=>p(!1),children:"Ã—"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("a",{className:`nav-item ${r==="dashboard"?"active":""}`,onClick:()=>{b("dashboard"),p(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“Š"})," Dashboard"]}),e.jsxs("div",{className:"nav-item-container",onMouseEnter:()=>ge(!0),onMouseLeave:()=>ge(!1),children:[e.jsxs("a",{className:`nav-item ${r==="gallery"||r==="home-gallery"?"active":""}`,onClick:()=>ge(!pe),children:[e.jsx("span",{className:"nav-icon",children:"ðŸ–¼ï¸"})," Gallery",e.jsx("span",{className:"dropdown-arrow",style:{marginLeft:"auto",fontSize:"0.8em"},children:pe?"â–¼":"â–¶"})]}),pe&&e.jsxs("div",{className:"sub-menu",children:[e.jsx("a",{className:`sub-nav-item ${r==="gallery"?"active":""}`,onClick:()=>{b("gallery"),p(!1)},children:"Gallery Page"}),e.jsx("a",{className:`sub-nav-item ${r==="home-gallery"?"active":""}`,onClick:()=>{b("home-gallery"),p(!1)},children:"Homepage Gallery"})]})]}),e.jsxs("a",{className:`nav-item ${r==="collections"?"active":""}`,onClick:()=>{b("collections"),p(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“‚"})," Collections"]}),e.jsxs("a",{className:`nav-item ${r==="settings"?"active":""}`,onClick:()=>{b("settings"),p(!1)},children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"})," Settings"]}),e.jsxs("a",{className:"nav-item logout-btn",onClick:js,style:{marginTop:"auto",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"1rem"},children:[e.jsx("span",{className:"nav-icon",children:"ðŸšª"})," Logout"]})]})]}),e.jsxs("main",{className:"dashboard-main",children:[r==="dashboard"&&vs(),r==="contact-inquiries"&&Ns(),r==="collection-inquiries"&&bs(),r==="gallery"&&Cs(),r==="home-gallery"&&Ps(),r==="collections"&&ws(),r==="collection-designs"&&ys(),r==="settings"&&Es()]}),Ve&&e.jsx("div",{className:"popup-overlay",onClick:je,children:e.jsxs(w.div,{className:"popup-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Notification"}),e.jsx("button",{className:"close-popup-btn",onClick:je,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsx("p",{children:Le})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{className:"popup-btn-primary",onClick:je,children:"OK"})})]})}),Be&&e.jsx("div",{className:"popup-overlay",onClick:()=>$(!1),children:e.jsxs(w.div,{className:"popup-content delete-confirm",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"popup-header",children:e.jsx("h3",{children:"âš ï¸ Confirm Delete"})}),e.jsx("div",{className:"popup-body",children:m?.handler==="contact"?e.jsx("p",{children:"Are you sure you want to delete this Message?"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure you want to delete this item?"}),e.jsx("p",{className:"warning-text",children:"This action cannot be undone."})]})}),e.jsxs("div",{className:"popup-footer",children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>$(!1),children:"Cancel"}),e.jsx("button",{className:"popup-btn-danger",onClick:hs,children:"Delete"})]})]})}),C.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:Y,children:e.jsxs(w.div,{className:"popup-content notes-modal",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:C.mode==="edit"?"âœï¸ Edit Notes":"ðŸ‘ï¸ View Notes"}),e.jsx("button",{className:"close-popup-btn",onClick:Y,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:C.mode==="edit"?e.jsx("textarea",{className:"notes-modal-textarea",placeholder:"Add your notes here...",value:C.notes,onChange:s=>Je(s.target.value),rows:"6",autoFocus:!0}):e.jsx("div",{className:"notes-view-content",children:C.notes||"No notes available"})}),e.jsx("div",{className:"popup-footer",children:C.mode==="edit"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:Y,children:"Cancel"}),e.jsx("button",{className:"popup-btn-primary",onClick:We,children:"Save Notes"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>oe(s=>({...s,mode:"edit"})),children:"Edit"}),e.jsx("button",{className:"popup-btn-primary",onClick:Y,children:"Close"})]})})]})})]})};export{ga as default};
