import{f as oa,r,j as e,m as b,h as pe,i as ia,k as ra}from"./vendor-C4MZbRyZ.js";import{s as ce,u as ca,H as da,l as ma}from"./index-Dh3xUCz6.js";import{D as ge}from"./ui-h3E-pYNY.js";import{b as ha,c as xe,a as ua,u as re,d as fe,e as pa,g as ga,h as xa,i as fa,j as ja,k as Na,l as ba,f as va,m as wa,n as ya}from"./databaseUtils-bm3h8eoR.js";import{f as Ca,u as Pa,d as Sa,b as ka,c as Ea}from"./contactUtils-CK5v5UT7.js";const Da=async(P,S=1920,f=1080,D=.85)=>new Promise((v,x)=>{const c=new FileReader;c.readAsDataURL(P),c.onload=p=>{const d=new Image;d.src=p.target.result,d.onload=()=>{const w=document.createElement("canvas");let g=d.width,N=d.height;g>N?g>S&&(N=Math.round(N*S/g),g=S):N>f&&(g=Math.round(g*f/N),N=f),w.width=g,w.height=N,w.getContext("2d").drawImage(d,0,0,g,N),w.toBlob(T=>{if(T){const M=new File([T],P.name,{type:"image/jpeg",lastModified:Date.now()});v(M)}else x(new Error("Failed to compress image"))},"image/jpeg",D)},d.onerror=()=>{x(new Error("Failed to load image"))}},c.onerror=()=>{x(new Error("Failed to read file"))}}),$=async(P,S="Gallery",f="images")=>{try{const D=await Da(P),v=P.name.split(".").pop(),x=`${Date.now()}_${Math.random().toString(36).substring(7)}.${v}`,c=`${f}/${x}`,{data:p,error:d}=await ce.storage.from(S).upload(c,D,{cacheControl:"3600",upsert:!1,contentType:"image/jpeg"});if(d)return console.error("Upload error:",d),{success:!1,error:d};const{data:{publicUrl:w}}=ce.storage.from(S).getPublicUrl(c);return{success:!0,url:w,path:c}}catch(D){return console.error("Upload error:",D),{success:!1,error:D}}},E=async(P,S="Gallery")=>{try{const{error:f}=await ce.storage.from(S).remove([P]);return f?(console.error("Delete error:",f),{success:!1,error:f}):{success:!0}}catch(f){return console.error("Delete error:",f),{success:!1,error:f}}},je=({item:P,children:S,className:f,...D})=>{const v=ia(),x=r.useRef(null),c=d=>{x.current=setTimeout(()=>{navigator.vibrate&&navigator.vibrate(50),v.start(d)},2e3)},p=()=>{x.current&&(clearTimeout(x.current),x.current=null)};return e.jsx(ra,{value:P,dragListener:!1,dragControls:v,className:f,...D,onMouseDown:d=>v.start(d),onTouchStart:c,onTouchEnd:p,onTouchMove:p,children:S})},_a=()=>{const P=oa(),{user:S,signOut:f,updatePassword:D}=ca(),[v,x]=r.useState(!1),[c,p]=r.useState(()=>localStorage.getItem("adminActiveTab")||"dashboard");r.useEffect(()=>{localStorage.setItem("adminActiveTab",c)},[c]);const[d,w]=r.useState([]),[g,N]=r.useState([]),[A,T]=r.useState([]),[M,Z]=r.useState({name:"",image:null}),[Ne,V]=r.useState(!1),[K,be]=r.useState(null),[Y,B]=r.useState([]),[k,z]=r.useState({name:"",image:null,plate_count:""}),[ve,de]=r.useState(!1),Q=r.useRef(null),[y,J]=r.useState({isOpen:!1,id:null,name:"",image:null,currentImage:"",storagePath:""}),[ee,ae]=r.useState(!1),[u,se]=r.useState({name:"Admin User",image:null}),[_,te]=r.useState({newPassword:"",confirmPassword:""}),[we,n]=r.useState(!1),[ye,o]=r.useState(""),[Ce,G]=r.useState(!1),[m,O]=r.useState(null),le=()=>n(!1),[j,W]=r.useState([]),[I,X]=r.useState({isOpen:!1,mode:"edit",entryId:null,notes:""}),[Pe,L]=r.useState(!1),me=(a,s)=>{X({isOpen:!0,mode:s,entryId:a.id,notes:a.notes||""})},Se=a=>{J({isOpen:!0,id:a.id,name:a.name,image:null,currentImage:a.image,storagePath:a.storage_path})},ne=()=>{J({isOpen:!1,id:null,name:"",image:null,currentImage:"",storagePath:""})},ke=async a=>{a.preventDefault(),V(!0),o("Updating collection..."),n(!0);try{let s={name:y.name},t=y.storagePath;if(y.image){y.storagePath&&await E(y.storagePath);const i=await $(y.image,"Gallery","collections");if(!i.success)throw new Error("Image upload failed");s.image=i.url,s.storage_path=i.path}const l=await wa(y.id,s);if(l.success)T(A.map(i=>i.id===y.id?l.data:i)),o("Collection updated successfully!"),setTimeout(()=>n(!1),2e3),ne();else throw new Error(l.error.message||"Update failed")}catch(s){console.error(s),o("Failed to update collection."),setTimeout(()=>n(!1),2e3)}finally{V(!1)}},H=()=>{X({isOpen:!1,mode:"edit",entryId:null,notes:""})},Ee=a=>{X(s=>({...s,notes:a}))},De=async()=>{(await ka(I.entryId,I.notes)).success?(W(s=>s.map(t=>t.id===I.entryId?{...t,notes:I.notes}:t)),o("Notes saved successfully!"),n(!0),setTimeout(()=>n(!1),2e3),H()):(o("Failed to save notes"),n(!0))},Ie=a=>{O({id:a,handler:"contact"}),G(!0)},Ae=async(a,s)=>{(await Ea(a,s===""?null:s)).success?(W(l=>l.map(i=>i.id===a?{...i,workflow_status:s===""?null:s}:i)),o("Status updated successfully!"),n(!0),setTimeout(()=>n(!1),2e3)):(o("Failed to update status"),n(!0))},Me=()=>{const a=["Name","Email","Phone","Message","Date","Notes","Status"],s=j.map(l=>[l.name,l.email,l.phone,l.message,new Date(l.created_at).toLocaleString("en-IN"),l.notes||"",l.workflow_status||"Not Set"]),t=[a.join(","),...s.map(l=>l.map(i=>`"${String(i).replace(/"/g,'""')}"`).join(","))].join(`
`);oe(t,"contact-enquiries.csv","text/csv"),L(!1),o("Exported to CSV successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},Re=()=>{const a=j.map(l=>({Name:l.name,Email:l.email,Phone:l.phone,Message:l.message,Date:new Date(l.created_at).toLocaleString("en-IN"),Notes:l.notes||"",Status:l.workflow_status||"Not Set"})),s=Object.keys(a[0]||{}),t=[s.join(","),...a.map(l=>s.map(i=>`"${String(l[i]).replace(/"/g,'""')}"`).join(","))].join(`
`);oe(t,"contact-enquiries.xlsx","application/vnd.ms-excel"),L(!1),o("Exported to Excel successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},Te=()=>{const a=j.map(t=>({name:t.name,email:t.email,phone:t.phone,message:t.message,date:new Date(t.created_at).toISOString(),notes:t.notes||"",status:t.workflow_status||"Not Set"})),s=JSON.stringify(a,null,2);oe(s,"contact-enquiries.json","application/json"),L(!1),o("Exported to JSON successfully!"),n(!0),setTimeout(()=>n(!1),2e3)},oe=(a,s,t)=>{const l=new Blob([a],{type:t}),i=URL.createObjectURL(l),h=document.createElement("a");h.href=i,h.download=s,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(i)},q=()=>{x(!v)};r.useEffect(()=>{_e(),he();const a=localStorage.getItem("adminProfile");a&&se(JSON.parse(a))},[]),r.useEffect(()=>{c==="contact-inquiries"&&j.length>0&&Ge()},[c]);const _e=async()=>{try{const a=await ha();a.success&&w(a.data);const s=await xe();s.success&&N(s.data);const t=await ua();t.success&&T(t.data)}catch(a){console.error("Error loading gallery data:",a)}},he=async()=>{try{const a=await Ca();a.success&&W(a.data)}catch(a){console.error("Error loading contact entries:",a)}},Ge=async()=>{try{const a=j.filter(s=>s.status==="new");for(const s of a)await Pa(s.id,"read");await he()}catch(a){console.error("Error marking messages as read:",a)}},Fe=a=>{a.target.files[0]&&Z({...M,image:a.target.files[0]})},Ue=async a=>{if(a.preventDefault(),!M.name||!M.image){o("Please fill all fields"),n(!0);return}V(!0),o("Adding collection..."),n(!0);try{const s=await $(M.image,"Gallery","collections");if(!s.success)throw new Error("Image upload failed");const t=await ba({name:M.name,image:s.url,storage_path:s.path});if(t.success)T([t.data,...A]),Z({name:"",image:null}),Q.current&&(Q.current.value=""),o("Collection added successfully!"),setTimeout(()=>n(!1),2e3);else throw await E(s.path),new Error(t.error.message||"Database error")}catch(s){console.error(s),o("Failed to add collection.")}finally{V(!1)}},qe=(a,s)=>{O({id:a,storagePath:s,handler:"collection"}),G(!0)},Oe=async a=>{be(a),p("collection-designs"),B([]),o("Loading designs..."),n(!0);const s=await va(a.id);s.success?(B(s.data),setTimeout(()=>n(!1),500)):o("Failed to load designs.")},$e=async a=>{if(a.preventDefault(),!k.name||!k.image||!k.plate_count||!K){o("Please fill all fields."),n(!0);return}de(!0),o("Adding design plate..."),n(!0);try{const s=await $(k.image,"Gallery","designs");if(!s.success)throw new Error("Image upload failed");const t=await ya({collection_id:K.id,name:k.name,image:s.url,storage_path:s.path,plate_count:parseInt(k.plate_count)});if(!t.success)throw await E(s.path),new Error(t.error.message||"Database error");B([t.data,...Y]),z({name:"",image:null,plate_count:""});const l=document.getElementById("design-image-input");l&&(l.value=""),o("Design plate added successfully!"),setTimeout(()=>n(!1),2e3)}catch(s){console.error(s),o("Failed to add design.")}finally{de(!1)}},Le=(a,s)=>{O({id:a,storagePath:s,handler:"design"}),G(!0)},He=async a=>{a.preventDefault();const s=document.getElementById("media-upload"),t=Array.from(s.files);if(t.length!==0){o("Uploading and optimizing... Please wait."),n(!0);try{for(const C of t)if(C.size>10485760)throw new Error(`Image "${C.name}" is too large. Maximum size is 10MB. Current size: ${(C.size/1024/1024).toFixed(2)}MB`);const i=t.map(async C=>{let U;if(U=await $(C),!U.success)throw new Error(U.error.message||"Upload failed");const R=await ja({url:U.url,storage_path:U.path,type:"image",alt:"Gallery Image"});if(!R.success)throw await E(U.path),new Error(R.error.message||"Database error");return R.data}),h=await Promise.all(i);w([...h,...d]),window.dispatchEvent(new Event("galleryUpdated")),o(`Successfully uploaded ${t.length} photo(s)!`),setTimeout(()=>n(!1),2e3),s.value=""}catch(l){console.error("Upload error:",l),o(`Error: ${l.message||"Failed to upload media"}`)}}},Ve=(a,s,t)=>{O({id:a,type:s,storagePath:t,handler:"media"}),G(!0)},Be=async()=>{if(m)try{if(m.handler==="media"){if(!(await pa(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await E(m.storagePath),m.type==="image"&&w(d.filter(s=>s.id!==m.id)),window.dispatchEvent(new Event("galleryUpdated")),o("Item deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="home"){if(!(await ga(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await E(m.storagePath),N(g.filter(s=>s.id!==m.id)),window.dispatchEvent(new Event("galleryUpdated")),o("Image deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="collection"){if(!(await xa(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await E(m.storagePath),T(A.filter(s=>s.id!==m.id)),o("Collection deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}else if(m.handler==="contact")if((await Sa(m.id)).success)W(s=>s.filter(t=>t.id!==m.id)),o("Contact entry deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3);else throw new Error("Failed to delete contact entry");else if(m.handler==="design"){if(!(await fa(m.id)).success)throw new Error("Failed to delete from database");m.storagePath&&await E(m.storagePath),B(Y.filter(s=>s.id!==m.id)),o("Design deleted successfully!"),n(!0),setTimeout(()=>n(!1),2e3)}}catch(a){console.error("Delete error:",a),o("Error deleting item. Please try again."),n(!0)}finally{G(!1),O(null)}},ze=async a=>{a.preventDefault();const s=await xe(),t=s.success?s.data.length:g.length;if(t>=6){o("Maximum images is 6 only. Please delete any existing image to upload new ones."),n(!0);return}const l=document.getElementById("home-image-upload"),i=Array.from(l.files);if(i.length!==0){if(t+i.length>6){o(`You can only upload ${6-t} more image(s). Maximum is 6 images total.`),n(!0);return}o("Uploading and optimizing... Please wait."),n(!0);try{const h=i.map(async U=>{const R=await $(U,"Gallery","home_images");if(!R.success)throw new Error(R.error.message||"Upload failed");const ie=await Na({url:R.url,storage_path:R.path,alt:"Home Gallery Image"});if(!ie.success)throw await E(R.path),new Error(ie.error.message||"Database error");return ie.data}),C=await Promise.all(h);N([...C,...g]),window.dispatchEvent(new Event("galleryUpdated")),l.value="",o(`Successfully uploaded ${i.length} image(s)!`),setTimeout(()=>n(!1),2e3)}catch(h){console.error("Upload error:",h),o(`Error: ${h.message||"Failed to upload images"}`)}}},F=(a,s,t)=>{let l=[],i=null,h=null;t==="image"?(l=[...d],i=w,h=re):t==="video"?(l=[...galleryVideos],i=setGalleryVideos,h=re):t==="home"&&(l=[...g],i=N,h=fe);const C=a+s;C<0||C>=l.length||([l[a],l[C]]=[l[C],l[a]],i(l),h(l))},Je=(a,s)=>{O({id:a,storagePath:s,handler:"home"}),G(!0)},ue=async(a,s)=>{try{o("Downloading..."),n(!0);const t=await fetch(a);if(!t.ok)throw new Error("Network response was not ok");const l=await t.blob(),i=window.URL.createObjectURL(l),h=document.createElement("a");h.href=i,h.download=s||"download",document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(i),setTimeout(()=>n(!1),1e3)}catch(t){console.error("Download failed:",t),o("Download failed. Opening in new tab..."),setTimeout(()=>n(!1),2e3),window.open(a,"_blank")}},We=async a=>{const s=a.target.files[0];if(s)try{u.storagePath&&await E(u.storagePath,"Gallery"),o("Uploading profile image..."),n(!0);const t=await $(s,"Gallery","profile_pics");if(t.success){const l={...u,image:t.url,storagePath:t.path};se(l),localStorage.setItem("adminProfile",JSON.stringify(l)),o("Profile updated successfully!"),setTimeout(()=>n(!1),2e3)}else o("Failed to upload image"),setTimeout(()=>n(!1),2e3)}catch(t){console.error("Profile upload error:",t),o("Error updating profile"),setTimeout(()=>n(!1),2e3)}},Xe=async()=>{if(window.confirm("Are you sure you want to remove the profile photo?"))try{u.storagePath&&await E(u.storagePath,"Gallery");const a={...u,image:null,storagePath:null};se(a),localStorage.setItem("adminProfile",JSON.stringify(a)),o("Profile photo removed"),n(!0),setTimeout(()=>n(!1),2e3)}catch(a){console.error("Error removing profile photo:",a),o("Failed to remove photo"),n(!0)}},Ze=async a=>{if(a.preventDefault(),_.newPassword!==_.confirmPassword){o("Passwords do not match!"),n(!0);return}if(_.newPassword.length<6){o("Password must be at least 6 characters long."),n(!0);return}try{const{error:s}=await D(_.newPassword);s?o(`Error updating password: ${s.message}`):(o("Password updated successfully!"),te({newPassword:"",confirmPassword:""}))}catch{o("An error occurred while updating password.")}n(!0)},Ke=async()=>{if(window.confirm("Are you sure you want to logout?")){const{error:a}=await f();a?(o("Error logging out. Please try again."),n(!0)):P("/admin_login")}},Ye={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},Qe=()=>e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:q,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Contact Enquiries"}),e.jsx("p",{children:"View and manage messages from the contact form."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>p("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),j.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:j.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[u.image?e.jsx("img",{src:u.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:u.name})]})]})]}),e.jsx(b.div,{className:"recent-orders",variants:Ye,initial:"hidden",animate:"show",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[j.map(a=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Name",children:a.name}),e.jsx("td",{"data-label":"Email",children:a.email}),e.jsx("td",{"data-label":"Phone",children:a.phone}),e.jsx("td",{"data-label":"Message",style:{maxWidth:"300px",whiteSpace:"normal"},children:a.message}),e.jsx("td",{"data-label":"Date",children:new Date(a.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-label":"Notes",children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:a.notes?e.jsx("button",{className:"action-btn view-notes-btn",onClick:()=>me(a,"view"),title:"View Notes",children:"ðŸ‘ï¸"}):e.jsx("button",{className:"action-btn edit-notes-btn",onClick:()=>me(a,"edit"),title:"Add Notes",children:"âœï¸"})})}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("a",{href:`tel:${a.phone}`,className:"action-btn call-btn",title:"Call",children:"ðŸ“ž"}),e.jsx("a",{href:`mailto:${a.email}`,className:"action-btn email-btn",title:"Send Email",children:"âœ‰ï¸"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>Ie(a.id),title:"Delete",children:"ðŸ—‘"})]})}),e.jsx("td",{"data-label":"Status",children:e.jsxs("select",{className:"status-dropdown",value:a.workflow_status||"",onChange:s=>Ae(a.id,s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"need_to_call",children:"Need to call"}),e.jsx("option",{value:"need_to_share_pictures",children:"Need to Share the pictures"}),e.jsx("option",{value:"waiting_for_confirmation",children:"Waiting for confirmation"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},a.id)),j.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{textAlign:"center"},children:"No enquiries found."})})]})]})})}),Pe&&e.jsx("div",{className:"modal-overlay",onClick:()=>L(!1),children:e.jsxs(b.div,{className:"modal-content export-modal",onClick:a=>a.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Export Contact Enquiries"}),e.jsx("button",{className:"modal-close",onClick:()=>L(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1.5rem",color:"#666"},children:"Choose your preferred export format:"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option-btn excel-btn",onClick:Re,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"export-label",children:"Excel (.xlsx)"}),e.jsx("span",{className:"export-desc",children:"Best for spreadsheet analysis"})]}),e.jsxs("button",{className:"export-option-btn csv-btn",onClick:Me,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“„"}),e.jsx("span",{className:"export-label",children:"CSV (.csv)"}),e.jsx("span",{className:"export-desc",children:"Universal format"})]}),e.jsxs("button",{className:"export-option-btn json-btn",onClick:Te,children:[e.jsx("span",{className:"export-icon",children:"ðŸ”§"}),e.jsx("span",{className:"export-label",children:"JSON (.json)"}),e.jsx("span",{className:"export-desc",children:"For developers"})]})]})]})]})})]});r.useRef(null),r.useRef(null);const ea=()=>e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"dashboard-overview",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:q,children:"â˜°"}),e.jsx("div",{className:"header-title",children:e.jsx("h1",{children:"Dashboard Overview"})})]})}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card",onClick:()=>p("contact-inquiries"),children:e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Enquiries"}),e.jsx("p",{className:"stat-value",children:j.length})]})}),e.jsx("div",{className:"stat-card",onClick:()=>p("gallery"),children:e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Media"}),e.jsx("p",{className:"stat-value",children:d.length+galleryVideos.length})]})}),e.jsx("div",{className:"stat-card",onClick:()=>p("collections"),children:e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Collections"}),e.jsx("p",{className:"stat-value",children:A.length})]})})]})]}),aa=()=>{const a=(s,t)=>{if(t==="up"&&s===0||t==="down"&&s===A.length-1)return;const l=[...A],i=t==="up"?s-1:s+1;[l[s],l[i]]=[l[i],l[s]],T(l)};return e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:q,children:"â˜°"}),e.jsx("div",{className:"header-title",children:e.jsx("h1",{children:"Collections"})})]})}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Collection"}),e.jsxs("form",{onSubmit:Ue,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:M.name,onChange:s=>Z({...M,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image"}),e.jsx("input",{id:"collection-image-input",type:"file",accept:"image/*",onChange:Fe,ref:Q,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:Ne,children:"Add Collection"})]})]}),e.jsx("div",{className:"admin-gallery-grid",children:A.map((s,t)=>e.jsxs("div",{className:"admin-gallery-item collection-card",children:[e.jsxs("div",{className:"reorder-arrows-top-left",children:[e.jsx("button",{className:"btn-arrow",onClick:()=>a(t,"up"),disabled:t===0,title:"Move Left",children:"â†"}),e.jsx("button",{className:"btn-arrow",onClick:()=>a(t,"down"),disabled:t===A.length-1,title:"Move Right",children:"â†’"})]}),e.jsx("img",{src:s.image,alt:s.name}),e.jsx("div",{className:"collection-overlay-center",children:e.jsxs("button",{className:"btn-add-designs",onClick:()=>Oe(s),children:[e.jsx("span",{children:"+"})," Add Designs"]})}),e.jsxs("div",{className:"item-actions",children:[e.jsx("div",{className:"collection-name-text",children:s.name}),e.jsxs("div",{className:"collection-action-btns",children:[e.jsx("button",{className:"btn-edit",onClick:()=>Se(s),children:"âœï¸"}),e.jsx("button",{className:"btn-delete",onClick:()=>qe(s.id,s.storage_path),children:"Delete"})]})]})]},s.id))}),y.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:ne,children:e.jsxs(b.div,{className:"popup-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Edit Collection"}),e.jsx("button",{className:"close-popup-btn",onClick:ne,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsxs("form",{onSubmit:ke,id:"edit-collection-form",className:"popup-form",children:[e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Name"}),e.jsx("input",{type:"text",className:"popup-input",value:y.name,onChange:s=>J({...y,name:s.target.value}),required:!0,placeholder:"Collection Name"})]}),e.jsxs("div",{className:"popup-form-group",children:[e.jsx("label",{className:"popup-label",children:"Update Image"}),e.jsx("input",{type:"file",className:"popup-file-input",onChange:s=>J({...y,image:s.target.files[0]}),accept:"image/*"})]})]})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{type:"submit",form:"edit-collection-form",className:"popup-btn-primary",children:"Update"})})]})})]})},sa=()=>e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:q,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("button",{style:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",marginRight:"10px"},onClick:()=>p("collections"),children:"Collections >"}),e.jsxs("h1",{children:[K?.name," Designs"]})]})]})}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add Design Plate"}),e.jsxs("form",{onSubmit:$e,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",value:k.name,onChange:a=>z({...k,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Set Count"}),e.jsx("input",{type:"number",value:k.plate_count,onChange:a=>z({...k,plate_count:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image"}),e.jsx("input",{id:"design-image-input",type:"file",accept:"image/*",onChange:a=>z({...k,image:a.target.files[0]}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:ve,children:"Add"})]})]}),e.jsx("div",{className:"admin-gallery-grid",children:Y.map(a=>e.jsxs("div",{className:"admin-gallery-item collection-card",children:[e.jsx("img",{src:a.image,alt:a.name}),e.jsxs("div",{className:"design-item-actions",children:[e.jsxs("div",{children:[a.name," (",a.plate_count," sets)"]}),e.jsx("button",{className:"btn-delete",onClick:()=>Le(a.id,a.storage_path),children:"Delete"})]})]},a.id))})]}),ta=()=>e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:q,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Gallery Management"}),e.jsx("p",{children:"Manage photos and videos for your gallery."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>p("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),j.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:j.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[u.image?e.jsx("img",{src:u.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:u.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Media"}),e.jsxs("form",{onSubmit:He,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos from Device (Multiple allowed)"}),e.jsx("input",{id:"media-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Photos (",d.length,")"]})}),e.jsxs(pe,{axis:"y",values:d,onReorder:a=>{w(a),re(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[d.map((a,s)=>e.jsxs(je,{item:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:t=>{t.stopPropagation(),F(s,-1,"image")},disabled:s===0,style:{opacity:s===0?.5:1,cursor:s===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:t=>{t.stopPropagation(),F(s,1,"image")},disabled:s===d.length-1,style:{opacity:s===d.length-1?.5:1,cursor:s===d.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>ue(a.url||a.src,`gallery-${a.id}.png`),children:e.jsx(ge,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>Ve(a.id,"image",a.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),F(s,-1,"image")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),F(s,1,"image")},children:"â†“"})]})]},a.id)),d.length===0&&e.jsx("p",{className:"no-images",children:"No photos in gallery."})]})]}),la=()=>e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"settings-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:q,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{children:"Manage your profile and security preferences."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>p("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),j.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:j.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[u.image?e.jsx("img",{src:u.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:u.name})]})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Profile Settings"}),e.jsxs("div",{className:"profile-upload-section",children:[e.jsx("div",{className:"current-avatar",children:u.image?e.jsx("img",{src:u.image,alt:"Profile"}):e.jsx("div",{className:"avatar-placeholder",children:"AD"})}),e.jsxs("div",{className:"upload-controls",children:[e.jsxs("label",{className:"btn-secondary",children:["Change Profile Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:We,hidden:!0})]}),u.image&&e.jsx("button",{className:"btn-remove-photo",onClick:Xe,children:"Remove Photo"}),e.jsx("p",{className:"help-text",children:"Recommended: Square JPG, PNG"})]})]})]}),e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Security"}),e.jsxs("form",{onSubmit:Ze,className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Password"}),e.jsx("input",{type:"password",placeholder:"Enter new password",value:_.newPassword,onChange:a=>te({..._,newPassword:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:_.confirmPassword,onChange:a=>te({..._,confirmPassword:a.target.value}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Change Password"})]})]})]})]}),na=()=>e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:q,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Homepage Gallery Management"}),e.jsx("p",{children:"Manage images displayed on the home page gallery section."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>p("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),j.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:j.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[u.image?e.jsx("img",{src:u.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:u.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Images"}),e.jsxs("form",{onSubmit:ze,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos from Device (Multiple allowed)"}),e.jsx("input",{id:"home-image-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Homepage Photos (",g.length,")"]})}),e.jsxs(pe,{axis:"y",values:g,onReorder:a=>{N(a),fe(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[g.map((a,s)=>e.jsxs(je,{item:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:t=>{t.stopPropagation(),F(s,-1,"home")},disabled:s===0,style:{opacity:s===0?.5:1,cursor:s===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:t=>{t.stopPropagation(),F(s,1,"home")},disabled:s===g.length-1,style:{opacity:s===g.length-1?.5:1,cursor:s===g.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>ue(a.url||a.src,`home-gallery-${a.id}.png`),children:e.jsx(ge,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>Je(a.id,a.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),F(s,-1,"home")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation(),F(s,1,"home")},children:"â†“"})]})]},a.id)),g.length===0&&e.jsx("p",{className:"no-images",children:"No photos in homepage gallery."})]})]});return e.jsxs("div",{className:`admin-dashboard ${v?"sidebar-open":""}`,children:[e.jsxs(da,{children:[e.jsx("title",{children:"Admin Dashboard | Venbha Plate Decors"}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),v&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>x(!1)}),e.jsxs("aside",{className:`dashboard-sidebar ${v?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header-mobile",children:[e.jsx("div",{className:"sidebar-brand",children:e.jsx("img",{src:ma,alt:"Venbha Admin",className:"sidebar-logo"})}),e.jsx("button",{className:"close-sidebar-btn",onClick:()=>x(!1),children:"Ã—"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("a",{className:`nav-item ${c==="dashboard"?"active":""}`,onClick:()=>{p("dashboard"),x(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“Š"})," Dashboard"]}),e.jsxs("div",{className:"nav-item-container",onMouseEnter:()=>ae(!0),onMouseLeave:()=>ae(!1),children:[e.jsxs("a",{className:`nav-item ${c==="gallery"||c==="home-gallery"?"active":""}`,onClick:()=>ae(!ee),children:[e.jsx("span",{className:"nav-icon",children:"ðŸ–¼ï¸"})," Gallery",e.jsx("span",{className:"dropdown-arrow",style:{marginLeft:"auto",fontSize:"0.8em"},children:ee?"â–¼":"â–¶"})]}),ee&&e.jsxs("div",{className:"sub-menu",children:[e.jsx("a",{className:`sub-nav-item ${c==="gallery"?"active":""}`,onClick:()=>{p("gallery"),x(!1)},children:"Gallery Page"}),e.jsx("a",{className:`sub-nav-item ${c==="home-gallery"?"active":""}`,onClick:()=>{p("home-gallery"),x(!1)},children:"Homepage Gallery"})]})]}),e.jsxs("a",{className:`nav-item ${c==="collections"?"active":""}`,onClick:()=>{p("collections"),x(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“‚"})," Collections"]}),e.jsxs("a",{className:`nav-item ${c==="settings"?"active":""}`,onClick:()=>{p("settings"),x(!1)},children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"})," Settings"]}),e.jsxs("a",{className:"nav-item logout-btn",onClick:Ke,style:{marginTop:"auto",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"1rem"},children:[e.jsx("span",{className:"nav-icon",children:"ðŸšª"})," Logout"]})]})]}),e.jsxs("main",{className:"dashboard-main",children:[c==="dashboard"&&ea(),c==="contact-inquiries"&&Qe(),c==="gallery"&&ta(),c==="home-gallery"&&na(),c==="collections"&&aa(),c==="collection-designs"&&sa(),c==="settings"&&la()]}),we&&e.jsx("div",{className:"popup-overlay",onClick:le,children:e.jsxs(b.div,{className:"popup-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Notification"}),e.jsx("button",{className:"close-popup-btn",onClick:le,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsx("p",{children:ye})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{className:"popup-btn-primary",onClick:le,children:"OK"})})]})}),Ce&&e.jsx("div",{className:"popup-overlay",onClick:()=>G(!1),children:e.jsxs(b.div,{className:"popup-content delete-confirm",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"popup-header",children:e.jsx("h3",{children:"âš ï¸ Confirm Delete"})}),e.jsx("div",{className:"popup-body",children:m?.handler==="contact"?e.jsx("p",{children:"Are you sure you want to delete this Message?"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure you want to delete this item?"}),e.jsx("p",{className:"warning-text",children:"This action cannot be undone."})]})}),e.jsxs("div",{className:"popup-footer",children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>G(!1),children:"Cancel"}),e.jsx("button",{className:"popup-btn-danger",onClick:Be,children:"Delete"})]})]})}),I.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:H,children:e.jsxs(b.div,{className:"popup-content notes-modal",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:I.mode==="edit"?"âœï¸ Edit Notes":"ðŸ‘ï¸ View Notes"}),e.jsx("button",{className:"close-popup-btn",onClick:H,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:I.mode==="edit"?e.jsx("textarea",{className:"notes-modal-textarea",placeholder:"Add your notes here...",value:I.notes,onChange:a=>Ee(a.target.value),rows:"6",autoFocus:!0}):e.jsx("div",{className:"notes-view-content",children:I.notes||"No notes available"})}),e.jsx("div",{className:"popup-footer",children:I.mode==="edit"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:H,children:"Cancel"}),e.jsx("button",{className:"popup-btn-primary",onClick:De,children:"Save Notes"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>X(a=>({...a,mode:"edit"})),children:"Edit"}),e.jsx("button",{className:"popup-btn-primary",onClick:H,children:"Close"})]})})]})})]})};export{_a as default};
