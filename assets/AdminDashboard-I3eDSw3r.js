import{e as Je,r as d,j as e,m as S,f as le,h as We,i as Xe}from"./vendor-BlXpnA6F.js";import{s as z,u as Ze,H as Ke,l as Ye}from"./index-tSZtjjNx.js";import{D as oe}from"./ui-DyICeii-.js";import{f as Qe,a as ea,b as pe,c as aa,u as J,d as ge,e as sa,g as ta,h as la,i as oa,j as na,k as ia}from"./databaseUtils-DTqlWycC.js";import{f as ra,u as ca,d as da,b as ma,c as ha}from"./contactUtils-NnGzhiMv.js";const ua=async(v,b=1920,j=1080,N=.85)=>new Promise((y,m)=>{const i=new FileReader;i.readAsDataURL(v),i.onload=h=>{const r=new Image;r.src=h.target.result,r.onload=()=>{const E=document.createElement("canvas");let x=r.width,w=r.height;x>w?x>b&&(w=Math.round(w*b/x),x=b):w>j&&(x=Math.round(x*j/w),w=j),E.width=x,E.height=w,E.getContext("2d").drawImage(r,0,0,x,w),E.toBlob(T=>{if(T){const $=new File([T],v.name,{type:"image/jpeg",lastModified:Date.now()});y($)}else m(new Error("Failed to compress image"))},"image/jpeg",N)},r.onerror=()=>{m(new Error("Failed to load image"))}},i.onerror=()=>{m(new Error("Failed to read file"))}}),W=async(v,b="Gallery",j="images")=>{try{const N=await ua(v),y=v.name.split(".").pop(),m=`${Date.now()}_${Math.random().toString(36).substring(7)}.${y}`,i=`${j}/${m}`,{data:h,error:r}=await z.storage.from(b).upload(i,N,{cacheControl:"3600",upsert:!1});if(r)return console.error("Upload error:",r),{success:!1,error:r};const{data:{publicUrl:E}}=z.storage.from(b).getPublicUrl(i);return{success:!0,url:E,path:i}}catch(N){return console.error("Upload error:",N),{success:!1,error:N}}},R=async(v,b="Gallery")=>{try{const{error:j}=await z.storage.from(b).remove([v]);return j?(console.error("Delete error:",j),{success:!1,error:j}):{success:!0}}catch(j){return console.error("Delete error:",j),{success:!1,error:j}}},pa=async(v,b="Gallery",j="videos")=>{try{const N=v.name.split(".").pop(),y=`${Date.now()}_${Math.random().toString(36).substring(7)}.${N}`,m=`${j}/${y}`,{data:i,error:h}=await z.storage.from(b).upload(m,v,{cacheControl:"3600",upsert:!1});if(h)return console.error("Upload error:",h),{success:!1,error:h};const{data:{publicUrl:r}}=z.storage.from(b).getPublicUrl(m);return{success:!0,url:r,path:m}}catch(N){return console.error("Upload error:",N),{success:!1,error:N}}},ne=({item:v,children:b,className:j,...N})=>{const y=We(),m=d.useRef(null),i=r=>{m.current=setTimeout(()=>{navigator.vibrate&&navigator.vibrate(50),y.start(r)},2e3)},h=()=>{m.current&&(clearTimeout(m.current),m.current=null)};return e.jsx(Xe,{value:v,dragListener:!1,dragControls:y,className:j,...N,onMouseDown:r=>y.start(r),onTouchStart:i,onTouchEnd:h,onTouchMove:h,children:b})},va=()=>{const v=Je(),{user:b,signOut:j,updatePassword:N}=Ze(),[y,m]=d.useState(!1),[i,h]=d.useState(()=>localStorage.getItem("adminActiveTab")||"dashboard");d.useEffect(()=>{localStorage.setItem("adminActiveTab",i)},[i]);const[r,E]=d.useState([]),[x,w]=d.useState([]),[A,T]=d.useState([]),[$,X]=d.useState([]),[F,Z]=d.useState({name:"",image:null}),[ie,re]=d.useState(!1),[C,ce]=d.useState("image"),[K,Y]=d.useState(!1),[c,Q]=d.useState({name:"Admin User",image:null}),[G,ee]=d.useState({newPassword:"",confirmPassword:""}),[xe,o]=d.useState(!1),[je,n]=d.useState(""),[fe,_]=d.useState(!1),[u,V]=d.useState(null),ae=()=>o(!1),[g,B]=d.useState([]),[D,L]=d.useState({isOpen:!1,mode:"edit",entryId:null,notes:""}),[Ne,O]=d.useState(!1),de=(a,t)=>{L({isOpen:!0,mode:t,entryId:a.id,notes:a.notes||""})},H=()=>{L({isOpen:!1,mode:"edit",entryId:null,notes:""})},ve=a=>{L(t=>({...t,notes:a}))},be=async()=>{(await ma(D.entryId,D.notes)).success?(B(t=>t.map(s=>s.id===D.entryId?{...s,notes:D.notes}:s)),n("Notes saved successfully!"),o(!0),setTimeout(()=>o(!1),2e3),H()):(n("Failed to save notes"),o(!0))},ye=a=>{V({id:a,handler:"contact"}),_(!0)},we=async(a,t)=>{(await ha(a,t===""?null:t)).success?(B(l=>l.map(p=>p.id===a?{...p,workflow_status:t===""?null:t}:p)),n("Status updated successfully!"),o(!0),setTimeout(()=>o(!1),2e3)):(n("Failed to update status"),o(!0))},Ce=()=>{const a=["Name","Email","Phone","Message","Date","Notes","Status"],t=g.map(l=>[l.name,l.email,l.phone,l.message,new Date(l.created_at).toLocaleString("en-IN"),l.notes||"",l.workflow_status||"Not Set"]),s=[a.join(","),...t.map(l=>l.map(p=>`"${String(p).replace(/"/g,'""')}"`).join(","))].join(`
`);se(s,"contact-enquiries.csv","text/csv"),O(!1),n("Exported to CSV successfully!"),o(!0),setTimeout(()=>o(!1),2e3)},Pe=()=>{const a=g.map(l=>({Name:l.name,Email:l.email,Phone:l.phone,Message:l.message,Date:new Date(l.created_at).toLocaleString("en-IN"),Notes:l.notes||"",Status:l.workflow_status||"Not Set"})),t=Object.keys(a[0]||{}),s=[t.join(","),...a.map(l=>t.map(p=>`"${String(l[p]).replace(/"/g,'""')}"`).join(","))].join(`
`);se(s,"contact-enquiries.xlsx","application/vnd.ms-excel"),O(!1),n("Exported to Excel successfully!"),o(!0),setTimeout(()=>o(!1),2e3)},Se=()=>{const a=g.map(s=>({name:s.name,email:s.email,phone:s.phone,message:s.message,date:new Date(s.created_at).toISOString(),notes:s.notes||"",status:s.workflow_status||"Not Set"})),t=JSON.stringify(a,null,2);se(t,"contact-enquiries.json","application/json"),O(!1),n("Exported to JSON successfully!"),o(!0),setTimeout(()=>o(!1),2e3)},se=(a,t,s)=>{const l=new Blob([a],{type:s}),p=URL.createObjectURL(l),f=document.createElement("a");f.href=p,f.download=t,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(p)},U=()=>{m(!y)};d.useEffect(()=>{Ee(),me();const a=localStorage.getItem("adminProfile");a&&Q(JSON.parse(a))},[]),d.useEffect(()=>{i==="contact-inquiries"&&g.length>0&&ke()},[i]);const Ee=async()=>{try{const a=await Qe();a.success&&E(a.data);const t=await ea();t.success&&w(t.data);const s=await pe();s.success&&T(s.data);const l=await aa();l.success&&X(l.data)}catch(a){console.error("Error loading gallery data:",a)}},me=async()=>{try{const a=await ra();a.success&&B(a.data)}catch(a){console.error("Error loading contact entries:",a)}},ke=async()=>{try{const a=g.filter(t=>t.status==="new");for(const t of a)await ca(t.id,"read");await me()}catch(a){console.error("Error marking messages as read:",a)}},De=async a=>{a.preventDefault();const t=document.getElementById("media-upload"),s=Array.from(t.files);if(s.length!==0){n("Uploading and optimizing... Please wait."),o(!0);try{for(const k of s)if(C==="video"){if(k.size>52428800)throw new Error(`Video "${k.name}" is too large. Maximum size is 50MB. Current size: ${(k.size/1024/1024).toFixed(2)}MB`)}else if(C==="image"&&k.size>10485760)throw new Error(`Image "${k.name}" is too large. Maximum size is 10MB. Current size: ${(k.size/1024/1024).toFixed(2)}MB`);const f=s.map(async k=>{let P;if(C==="image"?P=await W(k):P=await pa(k),!P.success)throw new Error(P.error.message||"Upload failed");const q=await oa({url:P.url,storage_path:P.path,type:C,alt:`Gallery ${C}`});if(!q.success)throw await R(P.path),new Error(q.error.message||"Database error");return q.data}),M=await Promise.all(f);C==="image"?E([...M,...r]):w([...M,...x]),window.dispatchEvent(new Event("galleryUpdated")),t.value="",n(`Successfully uploaded ${s.length} ${C}(s)!`),setTimeout(()=>o(!1),2e3)}catch(l){console.error("Upload error:",l),n(`Error: ${l.message||"Failed to upload media"}`)}}},he=(a,t,s)=>{V({id:a,type:t,storagePath:s,handler:"media"}),_(!0)},Ie=async()=>{if(u)try{if(u.handler==="media"){if(!(await sa(u.id)).success)throw new Error("Failed to delete from database");u.storagePath&&await R(u.storagePath),u.type==="image"?E(r.filter(t=>t.id!==u.id)):w(x.filter(t=>t.id!==u.id)),window.dispatchEvent(new Event("galleryUpdated")),n("Item deleted successfully!"),o(!0),setTimeout(()=>o(!1),2e3)}else if(u.handler==="home"){if(!(await ta(u.id)).success)throw new Error("Failed to delete from database");u.storagePath&&await R(u.storagePath),T(A.filter(t=>t.id!==u.id)),window.dispatchEvent(new Event("galleryUpdated")),n("Image deleted successfully!"),o(!0),setTimeout(()=>o(!1),2e3)}else if(u.handler==="collection"){if(!(await la(u.id)).success)throw new Error("Failed to delete from database");u.storagePath&&await R(u.storagePath),X($.filter(t=>t.id!==u.id)),n("Collection deleted successfully!"),o(!0),setTimeout(()=>o(!1),2e3)}else if(u.handler==="contact")if((await da(u.id)).success)B(t=>t.filter(s=>s.id!==u.id)),n("Contact entry deleted successfully!"),o(!0),setTimeout(()=>o(!1),2e3);else throw new Error("Failed to delete contact entry")}catch(a){console.error("Delete error:",a),n("Error deleting item. Please try again."),o(!0)}finally{_(!1),V(null)}},Ae=async a=>{a.preventDefault();const t=await pe(),s=t.success?t.data.length:A.length;if(s>=6){n("Maximum images is 6 only. Please delete any existing image to upload new ones."),o(!0);return}const l=document.getElementById("home-image-upload"),p=Array.from(l.files);if(p.length!==0){if(s+p.length>6){n(`You can only upload ${6-s} more image(s). Maximum is 6 images total.`),o(!0);return}n("Uploading and optimizing... Please wait."),o(!0);try{const f=p.map(async k=>{const P=await W(k,"Gallery","home_images");if(!P.success)throw new Error(P.error.message||"Upload failed");const q=await na({url:P.url,storage_path:P.path,alt:"Home Gallery Image"});if(!q.success)throw await R(P.path),new Error(q.error.message||"Database error");return q.data}),M=await Promise.all(f);T([...M,...A]),window.dispatchEvent(new Event("galleryUpdated")),l.value="",n(`Successfully uploaded ${p.length} image(s)!`),setTimeout(()=>o(!1),2e3)}catch(f){console.error("Upload error:",f),n(`Error: ${f.message||"Failed to upload images"}`)}}},I=(a,t,s)=>{let l=[],p=null,f=null;s==="image"?(l=[...r],p=E,f=J):s==="video"?(l=[...x],p=w,f=J):s==="home"&&(l=[...A],p=T,f=ge);const M=a+t;M<0||M>=l.length||([l[a],l[M]]=[l[M],l[a]],p(l),f(l))},Me=(a,t)=>{V({id:a,storagePath:t,handler:"home"}),_(!0)},Te=a=>{const t=a.target.files[0];t&&Z({...F,image:t})},Ge=async a=>{if(a.preventDefault(),!F.name||!F.image){n("Please provide both name and image."),o(!0);return}re(!0),n("Adding collection..."),o(!0);try{const t=await W(F.image,"Gallery","collections");if(!t.success)throw new Error("Image upload failed");const s=await ia({name:F.name,image:t.url,storage_path:t.path});if(!s.success)throw await R(t.path),new Error(s.error.message||"Database error");X([s.data,...$]),Z({name:"",image:null});const l=document.getElementById("collection-image-input");l&&(l.value=""),n("Collection added successfully!"),o(!0),setTimeout(()=>o(!1),2e3)}catch(t){console.error(t),n("Failed to add collection."),o(!0)}finally{re(!1)}},Re=(a,t)=>{V({id:a,storagePath:t,handler:"collection"}),_(!0)},te=(a,t)=>{const s=document.createElement("a");s.href=a,s.download=t||"image.png",document.body.appendChild(s),s.click(),document.body.removeChild(s)},$e=async a=>{const t=a.target.files[0];if(t)try{c.storagePath&&await R(c.storagePath,"Gallery"),n("Uploading profile image..."),o(!0);const s=await W(t,"Gallery","profile_pics");if(s.success){const l={...c,image:s.url,storagePath:s.path};Q(l),localStorage.setItem("adminProfile",JSON.stringify(l)),n("Profile updated successfully!"),setTimeout(()=>o(!1),2e3)}else n("Failed to upload image"),setTimeout(()=>o(!1),2e3)}catch(s){console.error("Profile upload error:",s),n("Error updating profile"),setTimeout(()=>o(!1),2e3)}},Fe=async()=>{if(window.confirm("Are you sure you want to remove the profile photo?"))try{c.storagePath&&await R(c.storagePath,"Gallery");const a={...c,image:null,storagePath:null};Q(a),localStorage.setItem("adminProfile",JSON.stringify(a)),n("Profile photo removed"),o(!0),setTimeout(()=>o(!1),2e3)}catch(a){console.error("Error removing profile photo:",a),n("Failed to remove photo"),o(!0)}},_e=async a=>{if(a.preventDefault(),G.newPassword!==G.confirmPassword){n("Passwords do not match!"),o(!0);return}if(G.newPassword.length<6){n("Password must be at least 6 characters long."),o(!0);return}try{const{error:t}=await N(G.newPassword);t?n(`Error updating password: ${t.message}`):(n("Password updated successfully!"),ee({newPassword:"",confirmPassword:""}))}catch{n("An error occurred while updating password.")}o(!0)},qe=async()=>{if(window.confirm("Are you sure you want to logout?")){const{error:a}=await j();a?(n("Error logging out. Please try again."),o(!0)):v("/admin_login")}},Ue={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ue={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},Ve=()=>e.jsxs(e.Fragment,{children:[e.jsxs(S.div,{className:"dashboard-header",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:U,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Dashboard Overview"}),e.jsx("p",{children:"Welcome back, Admin! Here's what's happening today."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[c.image?e.jsx("img",{src:c.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:c.name})]})]})]}),e.jsx(S.div,{className:"stats-grid",variants:Ue,initial:"hidden",animate:"show",children:e.jsxs(S.div,{className:"stat-card",variants:ue,children:[e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Contact Enquiries"}),e.jsx("p",{className:"stat-value",children:g.length}),e.jsx("span",{className:"stat-change",children:"Messages"}),e.jsx("button",{className:"btn-primary",style:{padding:"0.4rem 1rem",fontSize:"0.8rem",marginTop:"10px",height:"auto"},onClick:()=>h("contact-inquiries"),children:"View"})]}),e.jsx("div",{className:"stat-icon users",children:"âœ‰ï¸"})]})})]}),Oe=()=>e.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:U,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Contact Enquiries"}),e.jsx("p",{children:"View and manage messages from the contact form."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[c.image?e.jsx("img",{src:c.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:c.name})]})]})]}),e.jsx(S.div,{className:"recent-orders",variants:ue,initial:"hidden",animate:"show",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[g.map(a=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Name",children:a.name}),e.jsx("td",{"data-label":"Email",children:a.email}),e.jsx("td",{"data-label":"Phone",children:a.phone}),e.jsx("td",{"data-label":"Message",style:{maxWidth:"300px",whiteSpace:"normal"},children:a.message}),e.jsx("td",{"data-label":"Date",children:new Date(a.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{"data-label":"Notes",children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:a.notes?e.jsx("button",{className:"action-btn view-notes-btn",onClick:()=>de(a,"view"),title:"View Notes",children:"ðŸ‘ï¸"}):e.jsx("button",{className:"action-btn edit-notes-btn",onClick:()=>de(a,"edit"),title:"Add Notes",children:"âœï¸"})})}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("a",{href:`tel:${a.phone}`,className:"action-btn call-btn",title:"Call",children:"ðŸ“ž"}),e.jsx("a",{href:`mailto:${a.email}`,className:"action-btn email-btn",title:"Send Email",children:"âœ‰ï¸"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>ye(a.id),title:"Delete",children:"ðŸ—‘"})]})}),e.jsx("td",{"data-label":"Status",children:e.jsxs("select",{className:"status-dropdown",value:a.workflow_status||"",onChange:t=>we(a.id,t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"need_to_call",children:"Need to call"}),e.jsx("option",{value:"need_to_share_pictures",children:"Need to Share the pictures"}),e.jsx("option",{value:"waiting_for_confirmation",children:"Waiting for confirmation"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})]},a.id)),g.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{textAlign:"center"},children:"No enquiries found."})})]})]})})}),Ne&&e.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:e.jsxs(S.div,{className:"modal-content export-modal",onClick:a=>a.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Export Contact Enquiries"}),e.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"1.5rem",color:"#666"},children:"Choose your preferred export format:"}),e.jsxs("div",{className:"export-options",children:[e.jsxs("button",{className:"export-option-btn excel-btn",onClick:Pe,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“Š"}),e.jsx("span",{className:"export-label",children:"Excel (.xlsx)"}),e.jsx("span",{className:"export-desc",children:"Best for spreadsheet analysis"})]}),e.jsxs("button",{className:"export-option-btn csv-btn",onClick:Ce,children:[e.jsx("span",{className:"export-icon",children:"ðŸ“„"}),e.jsx("span",{className:"export-label",children:"CSV (.csv)"}),e.jsx("span",{className:"export-desc",children:"Universal format"})]}),e.jsxs("button",{className:"export-option-btn json-btn",onClick:Se,children:[e.jsx("span",{className:"export-icon",children:"ðŸ”§"}),e.jsx("span",{className:"export-label",children:"JSON (.json)"}),e.jsx("span",{className:"export-desc",children:"For developers"})]})]})]})]})})]});d.useRef(null),d.useRef(null);const He=()=>e.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:U,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Gallery Management"}),e.jsx("p",{children:"Manage photos and videos for your gallery."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[c.image?e.jsx("img",{src:c.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:c.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Media"}),e.jsxs("div",{className:"upload-type-selector",children:[e.jsx("button",{className:`type-btn ${C==="image"?"active":""}`,onClick:()=>ce("image"),children:"ðŸ“¸ Photo"}),e.jsx("button",{className:`type-btn ${C==="video"?"active":""}`,onClick:()=>ce("video"),children:"ðŸŽ¥ Video"})]}),e.jsxs("form",{onSubmit:De,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Upload ",C==="image"?"Photos":"Videos"," from Device (Multiple allowed)"]}),e.jsx("input",{id:"media-upload",type:"file",accept:C==="image"?"image/*":"video/*",multiple:!0,required:!0})]}),e.jsxs("button",{type:"submit",className:"btn-primary",children:["Add ",C==="image"?"Photos":"Videos"]})]})]}),C==="image"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Photos (",r.length,")"]})}),e.jsxs(le,{axis:"y",values:r,onReorder:a=>{E(a),J(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[r.map((a,t)=>e.jsxs(ne,{item:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:s=>{s.stopPropagation(),I(t,-1,"image")},disabled:t===0,style:{opacity:t===0?.5:1,cursor:t===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:s=>{s.stopPropagation(),I(t,1,"image")},disabled:t===r.length-1,style:{opacity:t===r.length-1?.5:1,cursor:t===r.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>te(a.url||a.src,`gallery-${a.id}.png`),children:e.jsx(oe,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>he(a.id,"image",a.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),onClick:s=>{s.stopPropagation(),I(t,-1,"image")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),onClick:s=>{s.stopPropagation(),I(t,1,"image")},children:"â†“"})]})]},a.id)),r.length===0&&e.jsx("p",{className:"no-images",children:"No photos in gallery."})]})]}),C==="video"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"media-section-header video-header",children:e.jsxs("h3",{children:["Videos (",x.length,")"]})}),e.jsxs(le,{axis:"y",values:x,onReorder:a=>{w(a),J(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[x.map((a,t)=>e.jsxs(ne,{item:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("video",{src:a.url||a.src,className:"admin-video-preview",onClick:s=>s.target.paused?s.target.play():s.target.pause(),playsInline:!0,loop:!0,muted:!0}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-move",title:"Move Backward",onClick:s=>{s.stopPropagation(),I(t,-1,"video")},disabled:t===0,style:{opacity:t===0?.5:1,cursor:t===0?"not-allowed":"pointer"},children:"â†"}),e.jsx("button",{className:"btn-move",title:"Move Forward",onClick:s=>{s.stopPropagation(),I(t,1,"video")},disabled:t===x.length-1,style:{opacity:t===x.length-1?.5:1,cursor:t===x.length-1?"not-allowed":"pointer"},children:"â†’"}),e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>te(a.url||a.src,`video-${a.id}.mp4`),children:e.jsx(oe,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>he(a.id,"video",a.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),onClick:s=>{s.stopPropagation(),I(t,-1,"video")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),onClick:s=>{s.stopPropagation(),I(t,1,"video")},children:"â†“"})]})]},a.id)),x.length===0&&e.jsx("p",{className:"no-images",children:"No videos in gallery."})]})]})]}),ze=()=>e.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"settings-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:U,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{children:"Manage your profile and security preferences."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[c.image?e.jsx("img",{src:c.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:c.name})]})]})]}),e.jsxs("div",{className:"settings-grid",children:[e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Profile Settings"}),e.jsxs("div",{className:"profile-upload-section",children:[e.jsx("div",{className:"current-avatar",children:c.image?e.jsx("img",{src:c.image,alt:"Profile"}):e.jsx("div",{className:"avatar-placeholder",children:"AD"})}),e.jsxs("div",{className:"upload-controls",children:[e.jsxs("label",{className:"btn-secondary",children:["Change Profile Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:$e,hidden:!0})]}),c.image&&e.jsx("button",{className:"btn-remove-photo",onClick:Fe,children:"Remove Photo"}),e.jsx("p",{className:"help-text",children:"Recommended: Square JPG, PNG"})]})]})]}),e.jsxs("div",{className:"admin-card settings-card",children:[e.jsx("h3",{children:"Security"}),e.jsxs("form",{onSubmit:_e,className:"settings-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Password"}),e.jsx("input",{type:"password",placeholder:"Enter new password",value:G.newPassword,onChange:a=>ee({...G,newPassword:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",value:G.confirmPassword,onChange:a=>ee({...G,confirmPassword:a.target.value}),required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Change Password"})]})]})]})]}),Be=()=>e.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:U,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Collections Management"}),e.jsx("p",{children:"Manage your collections."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[c.image?e.jsx("img",{src:c.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:c.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Collection"}),e.jsxs("form",{onSubmit:Ge,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Collection Name"}),e.jsx("input",{type:"text",placeholder:"Enter collection name",value:F.name,onChange:a=>Z({...F,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cover Image"}),e.jsx("input",{id:"collection-image-input",type:"file",accept:"image/*",onChange:Te,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:ie,children:ie?"Adding...":"Add Collection"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Existing Collections (",$.length,")"]})}),e.jsxs("div",{className:"admin-gallery-grid",style:{marginTop:"1rem"},children:[$.map(a=>e.jsxs("div",{className:"admin-gallery-item collection-card",children:[e.jsx("img",{src:a.image,alt:a.name}),e.jsxs("div",{className:"item-actions",style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{color:"white",fontWeight:"bold",marginRight:"auto"},children:a.name}),e.jsx("button",{className:"btn-delete",onClick:()=>Re(a.id,a.storage_path),children:"Delete"})]})]},a.id)),$.length===0&&e.jsx("p",{className:"no-images",children:"No collections found."})]})]}),Le=()=>e.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"gallery-manager",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:U,children:"â˜°"}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"Homepage Gallery Management"}),e.jsx("p",{children:"Manage images displayed on the home page gallery section."})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h("contact-inquiries"),title:"Contact Enquiries",children:[e.jsx("span",{className:"bell-icon",children:"ðŸ””"}),g.filter(a=>a.status==="new").length>0&&e.jsx("span",{className:"notification-badge",children:g.filter(a=>a.status==="new").length})]}),e.jsxs("div",{className:"admin-profile",children:[c.image?e.jsx("img",{src:c.image,alt:"Admin",className:"admin-avatar-img"}):e.jsx("div",{className:"admin-avatar",children:"AD"}),e.jsx("span",{className:"admin-name",children:c.name})]})]})]}),e.jsxs("div",{className:"admin-card add-image-section",children:[e.jsx("h3",{children:"Add New Images"}),e.jsxs("form",{onSubmit:Ae,className:"add-image-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Photos from Device (Multiple allowed)"}),e.jsx("input",{id:"home-image-upload",type:"file",accept:"image/*",multiple:!0,required:!0})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Add Photos"})]})]}),e.jsx("div",{className:"media-section-header",children:e.jsxs("h3",{children:["Homepage Photos (",A.length,")"]})}),e.jsxs(le,{axis:"y",values:A,onReorder:a=>{T(a),ge(a)},className:"admin-gallery-grid",style:{listStyle:"none",padding:0},children:[A.map((a,t)=>e.jsxs(ne,{item:a,className:"admin-gallery-item",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},whileDrag:{scale:1.1,zIndex:10,cursor:"grabbing"},children:[e.jsx("img",{src:a.url||a.src,alt:"Gallery"}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-download",title:"Download",onClick:()=>te(a.url||a.src,`home-gallery-${a.id}.png`),children:e.jsx(oe,{width:18,height:18})}),e.jsx("button",{className:"btn-delete",onClick:()=>Me(a.id,a.storage_path),children:"Delete"})]}),e.jsxs("div",{className:"mobile-reorder-controls",children:[e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),onClick:s=>{s.stopPropagation(),I(t,-1,"home")},children:"â†‘"}),e.jsx("button",{type:"button",className:"mobile-reorder-btn",onPointerDown:s=>s.stopPropagation(),onTouchStart:s=>s.stopPropagation(),onClick:s=>{s.stopPropagation(),I(t,1,"home")},children:"â†“"})]})]},a.id)),A.length===0&&e.jsx("p",{className:"no-images",children:"No photos in homepage gallery."})]})]});return e.jsxs("div",{className:`admin-dashboard ${y?"sidebar-open":""}`,children:[e.jsx(Ke,{children:e.jsx("title",{children:"Admin Dashboard | Venbha Plate Decors"})}),y&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>m(!1)}),e.jsxs("aside",{className:`dashboard-sidebar ${y?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header-mobile",children:[e.jsx("div",{className:"sidebar-brand",children:e.jsx("img",{src:Ye,alt:"Venbha Admin",className:"sidebar-logo"})}),e.jsx("button",{className:"close-sidebar-btn",onClick:()=>m(!1),children:"Ã—"})]}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("a",{className:`nav-item ${i==="dashboard"?"active":""}`,onClick:()=>{h("dashboard"),m(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“Š"})," Dashboard"]}),e.jsxs("div",{className:"nav-item-container",onMouseEnter:()=>Y(!0),onMouseLeave:()=>Y(!1),children:[e.jsxs("a",{className:`nav-item ${i==="gallery"||i==="home-gallery"?"active":""}`,onClick:()=>Y(!K),children:[e.jsx("span",{className:"nav-icon",children:"ðŸ–¼ï¸"})," Gallery",e.jsx("span",{className:"dropdown-arrow",style:{marginLeft:"auto",fontSize:"0.8em"},children:K?"â–¼":"â–¶"})]}),K&&e.jsxs("div",{className:"sub-menu",children:[e.jsx("a",{className:`sub-nav-item ${i==="gallery"?"active":""}`,onClick:()=>{h("gallery"),m(!1)},children:"Gallery Page"}),e.jsx("a",{className:`sub-nav-item ${i==="home-gallery"?"active":""}`,onClick:()=>{h("home-gallery"),m(!1)},children:"Homepage Gallery"})]})]}),e.jsxs("a",{className:`nav-item ${i==="collections"?"active":""}`,onClick:()=>{h("collections"),m(!1)},children:[e.jsx("span",{className:"nav-icon",children:"ðŸ“‚"})," Collections"]}),e.jsxs("a",{className:`nav-item ${i==="settings"?"active":""}`,onClick:()=>{h("settings"),m(!1)},children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"})," Settings"]}),e.jsxs("a",{className:"nav-item logout-btn",onClick:qe,style:{marginTop:"auto",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"1rem"},children:[e.jsx("span",{className:"nav-icon",children:"ðŸšª"})," Logout"]})]})]}),e.jsxs("main",{className:"dashboard-main",children:[i==="dashboard"&&Ve(),i==="contact-inquiries"&&Oe(),i==="gallery"&&He(),i==="home-gallery"&&Le(),i==="collections"&&Be(),i==="settings"&&ze()]}),xe&&e.jsx("div",{className:"popup-overlay",onClick:ae,children:e.jsxs(S.div,{className:"popup-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:"Notification"}),e.jsx("button",{className:"close-popup-btn",onClick:ae,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:e.jsx("p",{children:je})}),e.jsx("div",{className:"popup-footer",children:e.jsx("button",{className:"popup-btn-primary",onClick:ae,children:"OK"})})]})}),fe&&e.jsx("div",{className:"popup-overlay",onClick:()=>_(!1),children:e.jsxs(S.div,{className:"popup-content delete-confirm",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"popup-header",children:e.jsx("h3",{children:"âš ï¸ Confirm Delete"})}),e.jsx("div",{className:"popup-body",children:u?.handler==="contact"?e.jsx("p",{children:"Are you sure you want to delete this Message?"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure you want to delete this item?"}),e.jsx("p",{className:"warning-text",children:"This action cannot be undone."})]})}),e.jsxs("div",{className:"popup-footer",children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>_(!1),children:"Cancel"}),e.jsx("button",{className:"popup-btn-danger",onClick:Ie,children:"Delete"})]})]})}),D.isOpen&&e.jsx("div",{className:"popup-overlay",onClick:H,children:e.jsxs(S.div,{className:"popup-content notes-modal",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"popup-header",children:[e.jsx("h3",{children:D.mode==="edit"?"âœï¸ Edit Notes":"ðŸ‘ï¸ View Notes"}),e.jsx("button",{className:"close-popup-btn",onClick:H,children:"Ã—"})]}),e.jsx("div",{className:"popup-body",children:D.mode==="edit"?e.jsx("textarea",{className:"notes-modal-textarea",placeholder:"Add your notes here...",value:D.notes,onChange:a=>ve(a.target.value),rows:"6",autoFocus:!0}):e.jsx("div",{className:"notes-view-content",children:D.notes||"No notes available"})}),e.jsx("div",{className:"popup-footer",children:D.mode==="edit"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:H,children:"Cancel"}),e.jsx("button",{className:"popup-btn-primary",onClick:be,children:"Save Notes"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"popup-btn-secondary",onClick:()=>L(a=>({...a,mode:"edit"})),children:"Edit"}),e.jsx("button",{className:"popup-btn-primary",onClick:H,children:"Close"})]})})]})})]})};export{va as default};
