import{e as Y,f as _,r as n,j as e,m as l}from"./vendor-C4MZbRyZ.js";import{H as $}from"./index-DhZOSC96.js";import{f as F,a as H}from"./databaseUtils-sm7AiFeG.js";import{a as V}from"./collectionUtils-DNGgMqzK.js";const G=()=>{const{collectionSlug:c}=Y(),E=_(),[r,I]=n.useState([]),[u,O]=n.useState(!0),[o,h]=n.useState(null),[f,v]=n.useState([]),[P,N]=n.useState(!1),[b,g]=n.useState(null),[d,S]=n.useState({isOpen:!1,design:null}),[a,x]=n.useState({name:"",phone:"",email:"",message:"",selectedSet:""}),[C,w]=n.useState(!1),[L,k]=n.useState(!1),y=s=>s.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");n.useEffect(()=>{const s=async()=>{const{success:i,data:t}=await H();if(i&&(I(t),c)){const p=t.find(R=>y(R.name)===c);p&&q(p)}O(!1)};window.scrollTo(0,0),s()},[]),n.useEffect(()=>{if(!u&&r.length>0)if(c){const s=c.toLowerCase(),i=r.find(t=>y(t.name)===s);i?i.id!==o?.id&&q(i):h(null)}else o&&(h(null),v([]));else r.length>0&&!c&&o&&h(null)},[c,r,u]);const q=async s=>{h(s),N(!0);try{const{success:i,data:t}=await F(s.id);i&&v(t)}catch(i){console.error("Error fetching designs:",i)}finally{N(!1)}},T=s=>{E(`/collections/${y(s.name)}`)},D=s=>{S({isOpen:!0,design:s}),x(i=>({...i,selectedSet:"",message:`I am interested in the design "${s.name}". Please share more details.`}))},j=()=>{S({isOpen:!1,design:null}),x({name:"",phone:"",email:"",message:"",selectedSet:""})},m=s=>{const{name:i,value:t}=s.target;x(p=>({...p,[i]:t}))},z=async s=>{if(s.preventDefault(),!a.name||!a.phone){alert("Please fill in your name and phone number.");return}w(!0);try{(await V({name:a.name,phone:a.phone,email:a.email,message:a.message,design_name:d.design.name,selected_sets:a.selectedSet||""})).success?(k(!0),setTimeout(()=>{k(!1),j()},3e3)):alert("Something went wrong. Please try again.")}catch(i){console.error(i),alert("Error submitting form.")}finally{w(!1)}},M={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return e.jsxs("div",{className:"designs-page",children:[e.jsxs($,{children:[e.jsxs("title",{children:[o?`${o.name} Designs`:"Our Collections"," | Venbha Plate Decors"]}),e.jsx("meta",{name:"description",content:"Explore our exclusive collection of plate decoration themes, from traditional seer varisai to modern engagement hampers."})]}),!o&&e.jsxs("header",{className:"page-header",children:[e.jsxs(l.h1,{className:"page-title",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8},children:["Our ",e.jsx("span",{children:"Collections"})]}),e.jsx(l.p,{className:"page-subtitle",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.8},children:"Discover our handpicked themes designed to make every occasion magical."})]}),e.jsx("div",{className:"collections-grid-container",children:o?e.jsxs(l.div,{className:"designs-view",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"designs-header",children:[e.jsx("h2",{children:o.name}),e.jsxs("p",{children:["Explore our exclusive ",o.name," designs"]})]}),P?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading designs..."})]}):f.length===0?e.jsx("div",{className:"no-collections",children:e.jsx("p",{children:"No designs added to this collection yet."})}):e.jsx("div",{className:"designs-grid",children:f.map((s,i)=>e.jsxs(l.div,{className:"design-card",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:i*.1},children:[e.jsxs("div",{className:"design-image-wrapper",children:[e.jsx("img",{src:s.image,alt:s.name,className:"design-img",onClick:()=>D(s)}),e.jsx("button",{className:"zoom-icon-btn",onClick:t=>{t.stopPropagation(),g(s.image)},title:"Zoom Image",children:"ðŸ”"})]}),e.jsx("div",{className:"design-info",onClick:()=>D(s),style:{cursor:"pointer"},children:e.jsx("h3",{children:s.name})})]},s.id))})]}):u?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading collections..."})]}):r.length===0?e.jsx(l.div,{className:"no-collections",initial:{opacity:0},animate:{opacity:1},children:e.jsx("p",{children:"No collections added yet. Check back soon!"})}):e.jsx(l.div,{className:"collections-grid",children:r.map(s=>e.jsx(l.div,{className:"collection-card",variants:M,onClick:()=>T(s),children:e.jsxs("div",{className:"card-image-container",children:[e.jsx("img",{src:s.image,alt:s.name,className:"collection-img",loading:"lazy"}),e.jsxs("div",{className:"card-overlay",children:[e.jsx("h3",{className:"collection-title",children:s.name}),e.jsxs("div",{className:"explore-btn",children:[e.jsx("span",{children:"Explore Designs"}),e.jsx("span",{children:"â†’"})]})]})]})},s.id))})}),b&&e.jsx("div",{className:"lightbox-overlay",onClick:()=>g(null),children:e.jsxs(l.div,{className:"lightbox-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"lightbox-close",onClick:()=>g(null),children:"Ã—"}),e.jsx("img",{src:b,alt:"Full View",className:"lightbox-img"})]})}),d.isOpen&&e.jsx("div",{className:"lightbox-overlay",onClick:j,children:e.jsxs(l.div,{className:"inquiry-modal-content",initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"modal-close-btn",onClick:j,children:"Ã—"}),e.jsxs("div",{className:"inquiry-form-header",children:[e.jsx("h2",{children:"Enquire Now"}),e.jsxs("p",{children:["Interested in ",e.jsx("strong",{children:d.design?.name}),"?"]}),e.jsx("p",{style:{marginTop:"10px"},children:"Fill the form below to get a quote."})]}),e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"inquiry-form-group",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:m,placeholder:"Your Name",required:!0})]}),e.jsxs("div",{className:"inquiry-form-group",children:[e.jsx("label",{children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:m,placeholder:"Your Phone Number",required:!0})]}),e.jsxs("div",{className:"inquiry-form-group",children:[e.jsx("label",{children:"Email (Optional)"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:m,placeholder:"Your Email"})]}),d.design?.plate_count&&e.jsxs("div",{className:"inquiry-form-group",children:[e.jsx("label",{children:"Number of Sets"}),e.jsxs("select",{name:"selectedSet",value:a.selectedSet,onChange:m,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",background:"#f9f9f9"},children:[e.jsx("option",{value:"",children:"Select Sets"}),String(d.design.plate_count).split(",").map((s,i)=>e.jsxs("option",{value:s.trim(),children:[s.trim()," Sets"]},i))]})]}),e.jsxs("div",{className:"inquiry-form-group",children:[e.jsx("label",{children:"Message"}),e.jsx("textarea",{name:"message",value:a.message,onChange:m,placeholder:"Any specific requirements?",rows:"3"})]}),e.jsx("button",{type:"submit",className:"btn-submit-inquiry",disabled:C,children:C?"Sending...":"Send Enquiry"})]})]})}),L&&e.jsx("div",{className:"lightbox-overlay",style:{background:"rgba(0,0,0,0.85)"},children:e.jsxs(l.div,{className:"success-modal",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},style:{background:"white",padding:"40px",borderRadius:"20px",textAlign:"center",maxWidth:"400px",width:"90%",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.2)"},children:[e.jsx(l.div,{initial:{scale:0},animate:{scale:1,rotate:360},transition:{type:"spring",duration:.8},style:{width:"80px",height:"80px",background:"#10B981",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",color:"white",boxShadow:"0 10px 20px rgba(16, 185, 129, 0.3)"},children:"âœ“"}),e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#333",margin:"0 0 10px 0",fontSize:"24px"},children:"Thank You!"}),e.jsxs("p",{style:{color:"#666",lineHeight:"1.6",margin:0},children:["We have received your enquiry. ",e.jsx("br",{})," Our team will contact you shortly!"]})]})]})})]})};export{G as default};
