import{R as r,j as e}from"./vendor-C4MZbRyZ.js";import{b,c as j,d as v}from"./databaseUtils-C77rZoyh.js";const N=({storageKey:a="galleryImages",title:i="Our Gallery",showPhotosTitle:y=!0})=>{const[l,n]=r.useState(null),[d,c]=r.useState([]),[h,m]=r.useState([]),[p,x]=r.useState(!0),o=r.useCallback(async()=>{x(!0);try{if(a==="galleryImages"){const s=await b();s.success&&c(s.data||[]);const t=await j();t.success&&m(t.data||[])}else if(a==="homeGalleryImages"){const s=await v();s.success&&c(s.data||[])}}catch(s){console.error("Error loading gallery:",s)}finally{x(!1)}},[a]);r.useEffect(()=>{o();const s=()=>o();return window.addEventListener("galleryUpdated",s),()=>window.removeEventListener("galleryUpdated",s)},[o]);const g=(s,t="image")=>{n({...s,type:t}),document.body.style.overflow="hidden"},u=()=>{n(null),document.body.style.overflow="auto"};return p?e.jsx("section",{className:"gallery-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:i}),e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx("p",{children:"Loading gallery..."})})]})}):e.jsxs("section",{className:"gallery-section",children:[e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:i}),y&&d.length>0&&e.jsx("div",{className:"section-subtitle",children:"Photos"}),e.jsx("div",{className:"gallery-grid",children:d.map((s,t)=>e.jsxs("div",{className:"gallery-item",onClick:()=>g(s,"image"),children:[e.jsx("img",{src:s.url||s.src,alt:s.alt||"Gallery Image",loading:"lazy"}),e.jsx("div",{className:"gallery-overlay",children:e.jsx("span",{children:"View"})})]},s.id||t))}),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"section-subtitle",style:{marginTop:"3rem"},children:"Videos"}),e.jsx("div",{className:"gallery-grid video-grid",children:h.map((s,t)=>e.jsx(f,{video:s,onClick:()=>g(s,"video")},s.id||t))})]})]}),l&&e.jsx("div",{className:"lightbox",onClick:u,children:e.jsxs("div",{className:`lightbox-content ${l.type==="video"?"video-mode":""}`,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"lightbox-close",onClick:u,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("div",{className:"lightbox-image-wrapper",children:l.type==="video"?e.jsx("video",{src:l.url,controls:!0,autoPlay:!0,playsInline:!0,style:{maxHeight:"85vh",maxWidth:"100%",borderRadius:"4px"},children:"Your browser does not support the video tag."}):e.jsx("img",{src:l.url||l.src,alt:l.alt})})]})})]})},f=({video:a,onClick:i})=>e.jsxs("div",{onClick:i,style:{position:"relative",borderRadius:"10px",overflow:"hidden",background:"#000",aspectRatio:"16/9",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",cursor:"pointer"},children:[e.jsx("video",{src:a.url+"#t=0.5",preload:"metadata",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.3)",transition:"background 0.3s ease"},className:"video-overlay-hover",children:e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"rgba(255,255,255,0.25)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid rgba(255,255,255,0.9)",boxShadow:"0 0 20px rgba(0,0,0,0.2)"},children:e.jsx("div",{style:{width:0,height:0,borderTop:"10px solid transparent",borderBottom:"10px solid transparent",borderLeft:"18px solid white",marginLeft:"4px"}})})})]});export{N as G};
