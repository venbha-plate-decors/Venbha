import{R as a,j as e}from"./vendor-C4MZbRyZ.js";import{b as u,c as j}from"./databaseUtils-q-RdM7j6.js";const f=({storageKey:t="galleryImages",title:i="Our Gallery",showPhotosTitle:x=!0})=>{const[s,n]=a.useState(null),[o,c]=a.useState([]),[g,d]=a.useState(!0),r=a.useCallback(async()=>{d(!0);try{if(t==="galleryImages"){const l=await u();l.success&&c(l.data||[])}else if(t==="homeGalleryImages"){const l=await j();l.success&&c(l.data||[])}}catch(l){console.error("Error loading gallery:",l)}finally{d(!1)}},[t]);a.useEffect(()=>{r();const l=()=>r();return window.addEventListener("galleryUpdated",l),()=>window.removeEventListener("galleryUpdated",l)},[r]);const m=l=>{n(l),document.body.style.overflow="hidden"},h=()=>{n(null),document.body.style.overflow="auto"};return g?e.jsx("section",{className:"gallery-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:i}),e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx("p",{children:"Loading gallery..."})})]})}):e.jsxs("section",{className:"gallery-section",children:[e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:i}),x&&o.length>0&&e.jsx("div",{className:"section-subtitle",children:"Photos"}),e.jsx("div",{className:"gallery-grid",children:o.map((l,y)=>e.jsxs("div",{className:"gallery-item",onClick:()=>m(l),children:[e.jsx("img",{src:l.url||l.src,alt:l.alt||"Gallery Image",loading:"lazy"}),e.jsx("div",{className:"gallery-overlay",children:e.jsx("span",{children:"View"})})]},l.id||y))})]}),s&&e.jsx("div",{className:"lightbox",onClick:h,children:e.jsxs("div",{className:"lightbox-content",onClick:l=>l.stopPropagation(),children:[e.jsx("button",{className:"lightbox-close",onClick:h,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("div",{className:"lightbox-image-wrapper",children:s.type==="video"?e.jsx("video",{src:s.url,controls:!0,autoPlay:!0,playsInline:!0,preload:"metadata",crossOrigin:"anonymous",className:"lightbox-video",style:{maxHeight:"80vh",maxWidth:"100%"}}):e.jsx("img",{src:s.url||s.src,alt:s.alt})})]})})]})};export{f as G};
