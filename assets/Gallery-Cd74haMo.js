import{R as l,j as e}from"./vendor-BlXpnA6F.js";import{f as N,a as b,b as G}from"./databaseUtils-D0Igdthr.js";const S=({storageKey:a="galleryImages",title:i="Our Gallery",showPhotosTitle:y=!0})=>{const[r,d]=l.useState(null),[c,m]=l.useState(null),[h,o]=l.useState([]),[x,j]=l.useState([]),[v,g]=l.useState(!0),n=l.useCallback(async()=>{g(!0);try{if(a==="galleryImages"){const[s,t]=await Promise.all([N(),b()]);s.success&&o(s.data||[]),t.success&&j(t.data||[])}else if(a==="homeGalleryImages"){const s=await G();s.success&&o(s.data||[])}}catch(s){console.error("Error loading gallery:",s),o([])}finally{g(!1)}},[a]);l.useEffect(()=>{n();const s=()=>{n()};return window.addEventListener("galleryUpdated",s),()=>{window.removeEventListener("galleryUpdated",s)}},[n]);const p=s=>{d(s),document.body.style.overflow="hidden"},f=s=>{m(s),document.body.style.overflow="hidden"},u=()=>{d(null),m(null),document.body.style.overflow="auto"};return v?e.jsx("section",{className:"gallery-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:i}),e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:e.jsx("p",{children:"Loading gallery..."})})]})}):e.jsxs("section",{className:"gallery-section",children:[e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:i}),y&&h.length>0&&e.jsx("div",{className:"section-subtitle",children:"Photos"}),e.jsx("div",{className:"gallery-grid",children:h.map((s,t)=>e.jsxs("div",{className:"gallery-item",onClick:()=>p(s),children:[e.jsx("img",{src:s.url||s.src,alt:s.alt||"Gallery Image",loading:"lazy"}),e.jsx("div",{className:"gallery-overlay",children:e.jsx("span",{children:"View"})})]},s.id||t))}),x.length>0&&e.jsxs("div",{className:"video-section",children:[e.jsx("div",{className:"section-subtitle",children:"Videos"}),e.jsx("div",{className:"gallery-grid video-grid",children:x.map((s,t)=>e.jsx(w,{video:s,onPlay:()=>f(s)},s.id||t))})]})]}),(r||c)&&e.jsx("div",{className:"lightbox",onClick:u,children:e.jsxs("div",{className:"lightbox-content",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"lightbox-close",onClick:u,children:"Ã—"}),r?e.jsx("img",{src:r.url||r.src,alt:r.alt}):e.jsx("video",{src:c.url||c.src,controls:!0,autoPlay:!0,style:{maxWidth:"100%",maxHeight:"90vh",boxShadow:"0 5px 25px rgba(0,0,0,0.5)"}})]})})]})},w=({video:a,onPlay:i})=>e.jsxs("div",{className:"modern-video-card",onClick:i,children:[e.jsx("video",{src:a.url||a.src,preload:"metadata",className:"video-thumbnail"}),e.jsx("div",{className:"video-overlay",children:e.jsx("div",{className:"play-button",children:e.jsx("div",{className:"play-icon"})})})]});export{S as G};
