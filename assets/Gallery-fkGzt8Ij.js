import{R as a,j as s}from"./vendor-fZdEb4jm.js";import{f as v,a as f,b as p}from"./databaseUtils-CZ8k3-RI.js";const G=({storageKey:r="galleryImages",title:n="Our Gallery",showPhotosTitle:y=!0})=>{const[t,o]=a.useState(null),[d,i]=a.useState([]),[m,x]=a.useState([]),[u,g]=a.useState(!0),c=a.useCallback(async()=>{g(!0);try{if(r==="galleryImages"){const[e,l]=await Promise.all([v(),f()]);e.success&&i(e.data||[]),l.success&&x(l.data||[])}else if(r==="homeGalleryImages"){const e=await p();e.success&&i(e.data||[])}}catch(e){console.error("Error loading gallery:",e),i([])}finally{g(!1)}},[r]);a.useEffect(()=>{c();const e=()=>{c()};return window.addEventListener("galleryUpdated",e),()=>{window.removeEventListener("galleryUpdated",e)}},[c]);const j=e=>{o(e),document.body.style.overflow="hidden"},h=()=>{o(null),document.body.style.overflow="auto"};return u?s.jsx("section",{className:"gallery-section",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{children:n}),s.jsx("div",{style:{textAlign:"center",padding:"40px"},children:s.jsx("p",{children:"Loading gallery..."})})]})}):s.jsxs("section",{className:"gallery-section",children:[s.jsxs("div",{className:"container",children:[s.jsx("h2",{children:n}),y&&d.length>0&&s.jsx("div",{className:"section-subtitle",children:"Photos"}),s.jsx("div",{className:"gallery-grid",children:d.map((e,l)=>s.jsxs("div",{className:"gallery-item",onClick:()=>j(e),children:[s.jsx("img",{src:e.url||e.src,alt:e.alt||"Gallery Image",loading:"lazy"}),s.jsx("div",{className:"gallery-overlay",children:s.jsx("span",{children:"View More"})})]},e.id||l))}),m.length>0&&s.jsxs("div",{className:"video-section",children:[s.jsx("div",{className:"section-subtitle",children:"Videos"}),s.jsx("div",{className:"gallery-grid video-grid",children:m.map((e,l)=>s.jsx("div",{className:"gallery-item video-item",children:s.jsx("video",{src:e.url||e.src,controls:!0,preload:"metadata"})},e.id||l))})]})]}),t&&s.jsx("div",{className:"lightbox",onClick:h,children:s.jsxs("div",{className:"lightbox-content",onClick:e=>e.stopPropagation(),children:[s.jsx("button",{className:"lightbox-close",onClick:h,children:"Ã—"}),s.jsx("img",{src:t.url||t.src,alt:t.alt})]})})]})};export{G};
