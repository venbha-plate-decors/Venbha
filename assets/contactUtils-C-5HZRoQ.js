import{s as o}from"./index-CqpTMLX2.js";const l=async()=>{try{const{data:r,error:s}=await o.from("contact_entries").select("*").order("created_at",{ascending:!1});return s?(console.error("Fetch error:",s),{success:!1,error:s}):{success:!0,data:r||[]}}catch(r){return console.error("Fetch error:",r),{success:!1,error:r}}},i=async r=>{try{console.log("Attempting to insert contact entry:",r);const{data:s,error:e}=await o.from("contact_entries").insert([{name:r.name,email:r.email,phone:r.phone,message:r.message,status:"new"}]).select();if(e)return console.error("Supabase insert error:",e),console.error("Error details:",{message:e.message,details:e.details,hint:e.hint,code:e.code}),{success:!1,error:e};console.log("Successfully inserted into database:",s);try{const t=new FormData;t.append("_subject",`New Contact Form Submission from ${r.name}`),t.append("name",r.name),t.append("email",r.email),t.append("phone",r.phone),t.append("message",r.message),t.append("_template","table"),t.append("_captcha","false");const c=await fetch("https://formsubmit.co/kvsnavee@gmail.com",{method:"POST",body:t,headers:{Accept:"application/json"}}),a=await c.json();c.ok?console.log("Email notification sent successfully via Formsubmit.co"):console.warn("Email notification failed:",a)}catch(t){console.warn("Email notification error:",t)}return{success:!0,data:s[0]}}catch(s){return console.error("Unexpected error in addContactEntry:",s),{success:!1,error:s}}},u=async(r,s)=>{try{const{error:e}=await o.from("contact_entries").update({status:s}).eq("id",r);return e?(console.error("Update error:",e),{success:!1,error:e}):{success:!0}}catch(e){return console.error("Update error:",e),{success:!1,error:e}}},d=async(r,s)=>{try{const{error:e}=await o.from("contact_entries").update({notes:s}).eq("id",r);return e?(console.error("Update notes error:",e),{success:!1,error:e}):{success:!0}}catch(e){return console.error("Update notes error:",e),{success:!1,error:e}}},f=async(r,s)=>{try{const{error:e}=await o.from("contact_entries").update({workflow_status:s}).eq("id",r);return e?(console.error("Update workflow status error:",e),{success:!1,error:e}):{success:!0}}catch(e){return console.error("Update workflow status error:",e),{success:!1,error:e}}},m=async r=>{try{const{error:s}=await o.from("contact_entries").delete().eq("id",r);return s?(console.error("Delete error:",s),{success:!1,error:s}):{success:!0}}catch(s){return console.error("Delete error:",s),{success:!1,error:s}}};export{i as a,d as b,f as c,m as d,l as f,u};
